{"id":"xkit_installer","script":"//* TITLE XKit Installer **//\n//* VERSION 6.9 REV C **//\n//* DESCRIPTION Lets you install XKit on your computer. **//\n//* DEVELOPER STUDIOXENIX **//\nXKit.extensions.xkit_installer = new Object({\n\n\trunning: false,\n\tmin_version: 6.9,\n\tinstalled: 0,\n\tto_install: [\n\t\t'xkit_main',\n\t\t'xkit_patches',\n\t\t'xkit_preferences',\n\t\t'xkit_updates',\n\t\t'xinbox',\n\t\t'one_click_postage',\n\t\t'one_click_reply',\n\t\t'tweaks',\n\t\t'go_to_dash'\n\t],\n\n\trun: function() {\n\n\t\tthis.running = true;\n\n\t\tif (this.min_version > XKit.version) {\n\t\t\t// XKit.window.show(\"Framework version mismatch\",\"<b>To be able to install XKit, you need XKit Framework version \" + parseFloat(this.min_version) + \", but you have version \" + XKit.version + \".</b><br/><br/>Please upgrade your XKit by going to the XKit website and try again or click on the Troubleshooting Help button below for more information.\", \"error\",\"<div id=\\\"xkit-close-message\\\" class=\\\"xkit-button default\\\">OK</div><a href=\\\"http://www.xkit.info/troubleshooting\\\" class=\\\"xkit-button\\\">Troubleshooting Help</a>\");\n\t\t\t// return;\n\t\t}\n\n\t\tXKit.window.show(\"Installing XKit\",\"<div id=\\\"xkit-install-process\\\" style=\\\"font-weight: bold;\\\">Starting installation..</div>Please do not navigate away from this page.\" + XKit.progress.add(\"installation\"),\"info\");\n\n\t\tXKit.extensions.xkit_installer.next();\n\n\t},\n\n\tnext: function() {\n\n\t\tif (XKit.extensions.xkit_installer.installed >= XKit.extensions.xkit_installer.to_install.length) {\n\t\t\t// Installation is complete I think!\n\t\t\tXKit.progress.value(\"installation\", 100);\n\t\t\tXKit.installed.remove(\"xkit_installer\");\n\t\t\tXKit.window.show(\"Thanks for installing me!\",\"<b>Installation of XKit is complete.</b><br/>After refreshing the page, the X icon will show up on the header next to the Inbox button. From there, you can customize XKit to your liking and get new extensions.\", \"info\",\"<a href=\\\"http://www.tumblr.com/dashboard\\\" id=\\\"xkit-restart-and-use\\\" class=\\\"xkit-button default\\\">Refresh page and start using XKit</a><a href=\\\"http://xkit-extension.tumblr.com/post/52742121604/chrome-system-restores-corrupt-profile-settings-and\\\" class=\\\"xkit-button\\\">XKit keeps re-installing itself?</a>\");\n\t\t\tXKit.tools.set_setting(\"xkit_installation_complete\",\"true\");\n\t\t\t$(\"#xkit-restart-and-use\").click(function() {\n\t\t\t\t$(this).addClass(\"disabled\");\n\t\t\t\t$(this).html(\"Please wait..\");\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar percentage = Math.round((100 * XKit.extensions.xkit_installer.installed) / (XKit.extensions.xkit_installer.to_install.length));\n\t\tXKit.progress.value(\"installation\", percentage);\n\n\t\tvar to_install = XKit.extensions.xkit_installer.to_install[XKit.extensions.xkit_installer.installed];\n\t\tXKit.console.add(\"Will be installing \" + to_install);\n\t\t$(\"#xkit-install-process\").html(\"Installing package \" + to_install + \"...\");\n\n\t\tXKit.install(to_install, function(mdata) {\n\n\t\t\tif (mdata.errors == true || mdata.script == \"\") {\n\t\t\t\tif (mdata.storage_error === true) {\n\t\t\t\t\tshow_error_installation(\"[Code: 631] Can't store data on browser\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (mdata.server_down === true) {\n\t\t\t\t\tshow_error_installation(\"[Code: 101] Can't reach XKit servers\");\n\t\t\t\t} else {\n\t\t\t\t\tif (mdata.file === \"not_found\") {\n\t\t\t\t\t\tshow_error_installation(\"Can't download \" + to_install + \": Not found\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshow_error_installation(\"Can't download \" + to_install);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Try evaling the script.\n\t\t\t\t// If it's working, then move to the next one.\n\t\t\t\teval(mdata.script);\n\t\t\t\tXKit.extensions.xkit_installer.installed++;\n\t\t\t\tXKit.extensions.xkit_installer.next();\n\t\t\t} catch(e) {\n\t\t\t\tshow_error_installation(\"[Code: 102] Can't run \" + to_install + \":<br/>\" + e.message);\n\t\t\t}\n\n\t\t});\n\n\t},\n\n\tdestroy: function() {\n\t\tthis.running = false;\n\t}\n\n});","title":"XKit Installer","description":"Lets you install XKit on your computer.","developer":"STUDIOXENIX","version":"6.9 REV C","file":"found","server":"up","errors":false,"frame":"false","beta":"false","slow":"false"}
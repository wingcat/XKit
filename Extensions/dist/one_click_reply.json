{"id":"one_click_reply","script":"//* TITLE One-Click Reply **//\n//* VERSION 2.0.6 **//\n//* DESCRIPTION Lets you reply to notifications **//\n//* DEVELOPER new-xkit **//\n//* DETAILS To use this extension, hover over a notification and click on the Reply button. If Multi-Reply is on, hold down the ALT key while clicking on the Reply button to select/deselect posts and reply to all of them at once. **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.one_click_reply = new Object({\n\n\trunning: false,\n\n\n\tpreferences: {\n\t\t\"sep-1\": {\n\t\t\ttext: \"Features\",\n\t\t\ttype: \"separator\"\n\t\t},\n\t\t\"enable_quick_reply\": {\n\t\t\ttext: \"Enable In-Dashboard Reply\",\n\t\t\tdefault: false,\n\t\t\tvalue: false,\n\t\t\texperimental: true\n\t\t},\n\t\t\"sep0\": {\n\t\t\ttext: \"Reply Options\",\n\t\t\ttype: \"separator\"\n\t\t},\n\t\t\"show_avatars\": {\n\t\t\ttext: \"Show avatars on reply posts\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\t\t\"open_in_new_tab\": {\n\t\t\ttext: \"Open reply windows in a new tab\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\t\t\"multi_reply\": {\n\t\t\ttext: \"Enable replying to multiple notifications at once (alt+click to select notifications)\",\n\t\t\tdefault: true,\n\t\t\tvalue: true\n\t\t},\n\t\t\"sep1a\": {\n\t\t\ttext: \"Mentioning Options\",\n\t\t\ttype: \"separator\"\n\t\t},\n\t\t\"mention_people\": {\n\t\t\ttext: \"Use the 'mentioning' feature of Tumblr on replies (extremely experimental)\",\n\t\t\tdefault: false,\n\t\t\tvalue: false,\n\t\t\texperimental: true,\n\t\t},\n\t\t\"sep1\": {\n\t\t\ttext: \"Tagging Options\",\n\t\t\ttype: \"separator\"\n\t\t},\n\t\t\"tag_people\": {\n\t\t\ttext: \"Tag people by their usernames on my replies\",\n\t\t\tdefault: true,\n\t\t\tvalue: true\n\t\t},\n\t\t\"tag_person_replace_hyphens\": {\n\t\t\ttext: \"Replace hyphens in usernames with spaces on tags\",\n\t\t\tdefault: false,\n\t\t\tvalue: false\n\t\t},\n\t\t\"auto_tag\": {\n\t\t\ttext: \"Auto-tag the post with a custom one\",\n\t\t\tdefault: false,\n\t\t\tvalue: true\n\t\t},\n\t\t\"auto_tag_text\": {\n\t\t\ttext:  \"Custom tag for reply posts\",\n\t\t\ttype: \"text\",\n\t\t\tdefault: \"\",\n\t\t\tvalue: \"\"\n\t\t}\n\t},\n\n\tsentences: {\n\n\t\t\"reblog\": \"<p><a href=\\\"%l\\\">%u</a> reblogged your post: <a href=\\\"%p\\\">%t</a></p>\",\n\t\t\"reblog_with_comments\": \"<p><a href=\\\"%l\\\">%u</a> reblogged your post <a href=\\\"%p\\\">%t</a> and added:</p><blockquote><p>%r</p></blockquote>\",\n\t\t\"like\": \"<p><a href=\\\"%l\\\">%u</a> liked your post: <a href=\\\"%p\\\">%t</a></p>\",\n\t\t\"follow\": \"<p><a href=\\\"%l\\\">%u</a> started following %b</p>\",\n\t\t\"reply\": \"<p><a href=\\\"%l\\\">%u</a> replied to your post: <a href=\\\"%p\\\">%t</a></p><blockquote><p>%r</p></blockquote>\",\n\t\t\"reply_photo\": \"<p><a href=\\\"%l\\\">%u</a> replied to your post with a photo: <a href=\\\"%p\\\">%t</a></p><blockquote><p>%r</p></blockquote>\",\n\t\t\"answer\": \"<p><a href=\\\"%l\\\">%u</a> answered your post: <a href=\\\"%p\\\">%t</a></p><blockquote><p>%r</p></blockquote>\",\n\n\t\t\"nt_reblog\": \"<p><a href=\\\"%l\\\">%u</a> reblogged your <a href=\\\"%p\\\">post</a></p>\",\n\t\t\"nt_reblog_with_comments\": \"<p><a href=\\\"%l\\\">%u</a> reblogged your <a href=\\\"%p\\\">post</a> and added:</p><blockquote><p>%r</p></blockquote>\",\n\t\t\"nt_like\": \"<p><a href=\\\"%l\\\">%u</a> liked your <a href=\\\"%p\\\">post</a></p>\",\n\t\t\"nt_reply\": \"<p><a href=\\\"%l\\\">%u</a> replied to your <a href=\\\"%p\\\">post:</a></p><blockquote><p>%r</p></blockquote>\",\n\t\t\"nt_reply_photo\": \"<p><a href=\\\"%l\\\">%u</a> replied to your <a href=\\\"%p\\\">post</a> with a photo:</p><blockquote><p>%r</p></blockquote>\",\n\t\t\"nt_answer\": \"<p><a href=\\\"%l\\\">%u</a> answered your <a href=\\\"%p\\\">post:</a></p><blockquote><p>%r</p></blockquote>\",\n\n\t},\n\n\tadded_css: false,\n\tadded_css_pn: false,\n\tadded_css_pn_new: false,\n\n\trun: function() {\n\n\t\ttry {\n\n\t\t\tXKit.tools.init_css(\"one_click_reply\");\n\n\t\t\tif (this.preferences.mention_people.value === true) {\n\n\t\t\t\t// This is a terrible way of doing this isn't it?\n\n\t\t\t\tfor (var obj in this.sentences) {\n\n\t\t\t\t\tthis.sentences[obj] = this.sentences[obj].replace(\"<p><a href=\\\"%l\\\">%u</a>\", \"<p><a class=\\\"tumblelog\\\">%u</a>\");\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (document.location.href.indexOf(\"/new/text\") !== -1) {\n\t\t\t\tXKit.interface.post_window_listener.add(\"one_click_reply_fill_post\", XKit.extensions.one_click_reply.fill_post);\n\t\t\t\t// XKit.extensions.one_click_reply.fill_post();\n\t\t\t}\n\n\t\t\tif (XKit.extensions.one_click_reply.preferences.enable_quick_reply.value === true) {\n\t\t\t\tvar m_html = \"<div id=\\\"xkit-one-click-reply-quick-reply-window-shadow\\\"></div>\" +\n\t\t\t\t\t\t\"<div id=\\\"xkit-one-click-reply-quick-reply-window\\\">\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-one-click-reply-quick-reply-close\\\">&nbsp;</div>\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-one-click-reply-quick-reply-title\\\">\" +\n\t\t\t\t\t\t\t\t\"<img src=\\\"http://31.media.tumblr.com/avatar_b5acef4abf8c_64.png\\\" class=\\\"xkit-qr-avatar\\\">\" +\n\t\t\t\t\t\t\t\t\"Replying to <span id=\\\"xkit-one-click-reply-quick-reply-username\\\">xenix</span>\" +\n\t\t\t\t\t\t\t\"</div>\" +\n\t\t\t\t\t\t\t\"<textarea id=\\\"xkit-one-click-reply-quick-reply-text\\\"></textarea>\" +\n\t\t\t\t\t\t\t\"<input type=\\\"text\\\" id=\\\"xkit-one-click-reply-quick-reply-tags\\\" placeholder=\\\"additional tags, comma separated\\\">\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-one-click-reply-quick-reply-ok\\\" class=\\\"xkit-button\\\">Reply</div>\" +\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-one-click-reply-quick-reply-new-tab\\\" class=\\\"xkit-button\\\">Open in New Tab</div>\" +\n\t\t\t\t\t\t\"</div>\";\n\t\t\t\t$(\"body\").append(m_html);\n\t\t\t\t$(\"#xkit-one-click-reply-quick-reply-close, #xkit-one-click-reply-quick-reply-window-shadow\").click(function() { if ($(this).hasClass(\"disabled\")) { return; } XKit.extensions.one_click_reply.quick_reply_close(); });\n\n\t\t\t\t$(\"#xkit-one-click-reply-quick-reply-text\").bind('keydown', function(event) {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t});\n\n\t\t\t\t$(\"#xkit-one-click-reply-quick-reply-text\").bind('input propertychange', function(event) {\n\n\t\t\t\t\tif(!this.value.length){\n\t\t\t\t\t\t$(\"#xkit-one-click-reply-quick-reply-ok\").addClass(\"disabled\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#xkit-one-click-reply-quick-reply-ok\").removeClass(\"disabled\");\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$(document).on(\"mouseleave\",\".post.is_mine .notes_container .note, .ui_notes .ui_note\", XKit.extensions.one_click_reply.exit_pn);\n\t\t\t$(document).on(\"mouseenter\",\".post.is_mine .notes_container .note, .ui_notes .ui_note\", XKit.extensions.one_click_reply.enter_pn);\n\t\t\t$(document).on(\"mouseenter\",\".notification\", XKit.extensions.one_click_reply.enter);\n\t\t\t$(document).on(\"click\",\".xkit-reply-button\", function(e) {\n\t\t\t\tvar m_parent = $(this).parentsUntil(\".notification\").parent();\n\t\t\t\tXKit.extensions.one_click_reply.make_post(m_parent, false, e);\n\t\t\t});\n\t\t\t$(document).on(\"click\",\".xkit-reply-button-pn\", function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tXKit.extensions.one_click_reply.make_post(this, true, e);\n\t\t\t});\n\n\t\t} catch(e) {\n\t\t\talert(\"Error:\\n\" + e.message);\n\t\t}\n\t},\n\n\tquick_reply_error: function(error_code) {\n\n\t\tXKit.window.show(\"Unable to create post\",\"<b>I'm sorry, but I could not create the post.</b><br/>Please try again later.<br/><br/>If the problem continues, check that you are not at your post limit, and send the XKit Blog an ask with the error code \\\"<b>OCRQR-\" + error_code + \"</b>\\\".\",\"error\",\"<div class=\\\"xkit-button default\\\" id=\\\"xkit-one-click-reply-error-close\\\">OK</div>\");\n\n\t\t$(\"#xkit-one-click-reply-error-close\").click(function() {\n\n\t\t\tXKit.window.close();\n\t\t\tXKit.extensions.one_click_reply.quick_reply_close();\n\n\t\t});\n\n\t},\n\n\t/**\n\t * Creates blog post\n\t * @param {String} sentence - html content\n\t * @param {String} tags - comma-separated tags\n\t * @param {Object} reply - A \"reply\" to append to the sentence\n\t * @param {String} blog - the id of the blog to post as\n\t * @param {Boolean?} retry_mode - If false, allows one retry\n\t */\n\tquick_reply_post: function(sentence, tags, reply, blog, retry_mode) {\n\n\t\tvar m_object = {};\n\n\t\treply = reply.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');\n\n\t\t// This is a terrible hack.\n\t\tif (XKit.extensions.one_click_reply.preferences.mention_people.value === true) {\n\n\t\t\tvar sentence_obj = $(\"<div>\" + sentence + \"</div>\");\n\n\t\t\t$(sentence_obj).find(\"a\").each(function() {\n\t\t\t\tif (typeof $(this).attr('href') !== \"undefined\") {\n\t\t\t\t\tif ($(this).attr('href').indexOf('/post/') === -1) {\n\t\t\t\t\t\t$(this).removeAttr('href').removeAttr('class').addClass(\"tumblelog\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsentence = sentence_obj.html();\n\n\t\t}\n\n\t\tm_object.form_key = XKit.interface.form_key();\n\t\tm_object.context_page = \"dashboard\";\n\t\tm_object.editor_type = \"rich\";\n\n\t\tm_object.channel_id = blog;\n\t\tm_object.context_id = blog;\n\n\t\tm_object[\"is_rich_text[one]\"] = \"0\";\n\t\tm_object[\"is_rich_text[two]\"] = \"1\";\n\t\tm_object[\"is_rich_text[three]\"] = \"0\";\n\n\t\tm_object[\"post[slug]\"] = \"\";\n\t\tm_object[\"post[draft_status]\"] = \"\";\n\t\tm_object[\"post[source_url]\"] = \"http://\";\n\t\tm_object[\"post[date]\"] = \"\";\n\n\t\tm_object[\"post[type]\"] = \"regular\";\n\t\tm_object[\"post[state]\"] = \"0\";\n\n\t\tm_object[\"post[tags]\"] = tags;\n\n\t\treply = XKit.extensions.one_click_reply.JsAutoP(reply);\n\n\t\tm_object[\"post[one]\"] = \"\";\n\t\tm_object[\"post[two]\"] = sentence + \"<p>\" + reply + \"</p>\";\n\t\tm_object[\"post[three]\"] = \"\";\n\n\t\ttry {\n\n\t\t\tif (XKit.extensions.tweaks.running === true) {\n\t\t\t\tif (XKit.extensions.tweaks.preferences.photo_replies.value === true) {\n\t\t\t\t\tm_object.allow_photo_replies = \"on\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t} catch(e) {\n\n\t\t\tconsole.log(\"OCR = Could not read Tweaks properties\");\n\n\t\t}\n\n\t\tXKit.interface.kitty.get(function(kitty_data) {\n\n\t\t\tif (kitty_data.errors === true) {\n\n\t\t\t\t// We fucked up for some reason.\n\t\t\t\tif (retry_mode !== true) {\n\t\t\t\t\tXKit.extensions.one_click_reply.quick_reply_post(sentence, tags, reply, blog, true);\n\t\t\t\t} else{\n\t\t\t\t\tXKit.extensions.one_click_reply.quick_reply_error(\"101\");\n\t\t\t\t}\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tGM_xmlhttpRequest({\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: \"http://www.tumblr.com/svc/post/update\",\n\t\t\t\tdata: JSON.stringify(m_object),\n\t\t\t\tjson: true,\n\t\t\t\theaders: {\n\t\t\t\t\t\"X-tumblr-puppies\": kitty_data.kitten,\n\t\t\t\t\t\"X-tumblr-form-key\": XKit.interface.form_key(),\n\t\t\t\t},\n\t\t\t\tonerror: function(response) {\n\t\t\t\t\tXKit.interface.kitty.set(\"\");\n\t\t\t\t\tif (retry_mode !== true) {\n\t\t\t\t\t\tXKit.extensions.one_click_reply.quick_reply_post(sentence, tags, reply, blog, true);\n\t\t\t\t\t} else{\n\t\t\t\t\t\tXKit.extensions.one_click_reply.quick_reply_error(\"101\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonload: function(response) {\n\t\t\t\t\t// We are done!\n\t\t\t\t\tXKit.interface.kitty.set(response.getResponseHeader(\"X-tumblr-kittens\"));\n\t\t\t\t\tvar mdata = null;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tmdata = jQuery.parseJSON(response.responseText);\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tXKit.extensions.one_click_reply.quick_reply_error(\"106\");\n\t\t\t\t\t}\n\t\t\t\t\tif (mdata.errors === false) {\n\t\t\t\t\t\tXKit.extensions.one_click_reply.quick_reply_close();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tXKit.extensions.one_click_reply.quick_reply_error(\"103\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t},\n\n\tJsAutoP: function(s) {\n\n\t\t// From: http://ufku.com/personal/autop\n\n\t\tif (!s || s.search(/\\n|\\r/) == -1) {\n\t\t\treturn s;\n\t\t}\n\t\tvar X = function(x, a, b) {return x.replace(new RegExp(a, 'g'), b)};\n\t\tvar R = function(a, b) {\n\t\t\ts = X(s, a, b);\n\t\t\treturn s;\n\t\t};\n\t\tvar blocks = '(table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select';\n\t\tblocks += '|form|blockquote|address|math|style|script|object|input|param|p|h[1-6])';\n\t\ts += '\\n';\n\t\tR('<br />\\\\s*<br />', '\\n\\n');\n\t\tR('(<' + blocks + '[^>]*>)', '\\n$1');\n\t\tR('(</' + blocks + '>)', '$1\\n\\n');\n\t\tR('\\r\\n|\\r', '\\n'); // cross-platform newlines\n\t\tR('\\n\\n+', '\\n\\n');// take care of duplicates\n\t\tR('\\n?((.|\\n)+?)\\n\\\\s*\\n', '<p>$1</p>\\n');// make paragraphs\n\t\tR('\\n?((.|\\n)+?)$', '<p>$1</p>\\n');//including one at the end\n\t\tR('<p>\\\\s*?</p>', '');// under certain strange conditions it could create a P of entirely whitespace\n\t\tR('<p>(<div[^>]*>\\\\s*)', '$1<p>');\n\t\tR('<p>([^<]+)\\\\s*?(</(div|address|form)[^>]*>)', '<p>$1</p>$2');\n\t\tR('<p>\\\\s*(</?' + blocks + '[^>]*>)\\\\s*</p>', '$1');\n\t\tR('<p>(<li.+?)</p>', '$1');// problem with nested lists\n\t\tR('<p><blockquote([^>]*)>', '<blockquote$1><p>');\n\t\tR('</blockquote></p>', '</p></blockquote>');\n\t\tR('<p>\\\\s*(</?' + blocks + '[^>]*>)', '$1');\n\t\tR('(</?' + blocks + '[^>]*>)\\\\s*</p>', '$1');\n\t\tR('<(script|style)(.|\\n)*?</\\\\1>', function(m0) {return X(m0, '\\n', '<PNL>')});\n\t\tR('(<br />)?\\\\s*\\n', '<br />\\n');\n\t\tR('<PNL>', '\\n');\n\t\tR('(</?' + blocks + '[^>]*>)\\\\s*<br />', '$1');\n\t\tR('<br />(\\\\s*</?(p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)', '$1');\n\t\tif (s.indexOf('<pre') != -1) {\n\t\t\tR('(<pre(.|\\n)*?>)((.|\\n)*?)</pre>', function(m0, m1, m2, m3) {\n\t\t\t\treturn X(m1, '\\\\\\\\([\\'\\\"\\\\\\\\])', '$1') + X(X(X(m3, '<p>', '\\n'), '</p>|<br />', ''), '\\\\\\\\([\\'\\\"\\\\\\\\])', '$1') + '</pre>';\n\t\t\t});\n\t\t}\n\t\treturn R('\\n</p>$', '</p>');\n\t},\n\n\tquick_reply_open: function(sentence, default_tags, avatar, username) {\n\n\t\t$(\"#xkit-one-click-reply-quick-reply-username\").html(username);\n\t\t$(\"#xkit-one-click-reply-quick-reply-title\").find(\".xkit-qr-avatar\").attr('src', avatar);\n\n\t\t$(\"#xkit-one-click-reply-quick-reply-window-shadow\").css(\"display\",\"block\");\n\t\t$(\"#xkit-one-click-reply-quick-reply-window\").fadeIn('fast');\n\n\t\t$(\"#xkit-one-click-reply-quick-reply-text, #xkit-one-click-reply-quick-reply-tags\").val(\"\");\n\t\t$(\"#xkit-one-click-reply-quick-reply-text, #xkit-one-click-reply-quick-reply-tags\").prop('disabled', false);\n\t\t$(\"#xkit-one-click-reply-quick-reply-new-tab, #xkit-one-click-reply-quick-reply-close, #xkit-one-click-reply-quick-reply-window-shadow\").removeClass(\"disabled\");\n\t\t$(\"#xkit-one-click-reply-quick-reply-ok\").addClass(\"disabled\");\n\n\t\tXKit.tools.set_setting(\"xkit_one_click_reply_data\", \"{}\");\n\n\t\tvar m_blog = XKit.tools.get_current_blog();\n\n\t\tvar initial_tags = \"\";\n\t\tif (XKit.extensions.one_click_reply.preferences.tag_people.value === true) {\n\t\t\tinitial_tags = default_tags;\n\t\t\tif (XKit.extensions.one_click_reply.preferences.auto_tag.value === true && XKit.extensions.one_click_reply.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\tinitial_tags += \",\" + XKit.extensions.one_click_reply.preferences.auto_tag_text.value;\n\t\t\t}\n\t\t} else {\n\t\t\tif (XKit.extensions.one_click_reply.preferences.auto_tag.value === true && XKit.extensions.one_click_reply.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\tinitial_tags += \",\" + XKit.extensions.one_click_reply.preferences.auto_tag_text.value;\n\t\t\t}\n\t\t}\n\t\t$(\"#xkit-one-click-reply-quick-reply-tags\").val(initial_tags);\n\n\t\t$(\"#xkit-one-click-reply-quick-reply-ok\").unbind(\"click\");\n\t\t$(\"#xkit-one-click-reply-quick-reply-ok\").click(function() {\n\n\t\t\tif ($(this).hasClass(\"disabled\")) { return; }\n\n\t\t\t$(\"#xkit-one-click-reply-quick-reply-text, #xkit-one-click-reply-quick-reply-tags\").prop('disabled', true);\n\n\t\t\t$(\"#xkit-one-click-reply-quick-reply-ok, #xkit-one-click-reply-quick-reply-new-tab, #xkit-one-click-reply-quick-reply-close, #xkit-one-click-reply-quick-reply-window-shadow\").addClass(\"disabled\");\n\n\t\t\tvar tags = $(\"#xkit-one-click-reply-quick-reply-tags\").val();\n\t\t\tXKit.extensions.one_click_reply.quick_reply_post(sentence, tags, $(\"#xkit-one-click-reply-quick-reply-text\").val(), m_blog);\n\n\t\t});\n\n\t\t$(\"#xkit-one-click-reply-quick-reply-new-tab\").unbind(\"click\");\n\t\t$(\"#xkit-one-click-reply-quick-reply-new-tab\").click(function() {\n\n\t\t\tif ($(this).hasClass(\"disabled\")) { return; }\n\n\t\t\tvar tags = $(\"#xkit-one-click-reply-quick-reply-tags\").val();\n\n\t\t\tvar data = {\n\t\t\t\ttags: tags,\n\t\t\t\tsentence: sentence + \"<p></p>\"\n\t\t\t};\n\t\t\tXKit.tools.set_setting(\"xkit_one_click_reply_data\", JSON.stringify(data));\n\n\t\t\tvar m_url = \"http://www.tumblr.com/new/text\";\n\n\t\t\tif (document.location.href.indexOf(\"/blog/\") !== -1) {\n\t\t\t\t// Maybe we can make this better?\n\t\t\t\tif ($(\"#new_post_label_text\").length > 0) {\n\t\t\t\t\tm_url = $(\"#new_post_label_text\").attr('href');\n\t\t\t\t} else {\n\t\t\t\t\tm_url = $(\"body\").attr('data-new-root') + \"/new/text\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (m_url.indexOf('?') !== -1) {\n\t\t\t\tm_url = m_url.substring(0, m_url.indexOf('?'));\n\t\t\t}\n\n\n\t\t\tif (XKit.extensions.one_click_reply.preferences.tag_people.value === true) {\n\t\t\t\tm_url = m_url + \"?tags=\" + tags;\n\t\t\t\tif (XKit.extensions.one_click_reply.preferences.auto_tag.value === true && XKit.extensions.one_click_reply.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\t\tm_url = m_url + \",\" + XKit.extensions.one_click_reply.preferences.auto_tag_text.value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (XKit.extensions.one_click_reply.preferences.auto_tag.value === true && XKit.extensions.one_click_reply.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\t\tm_url = m_url + \"?tags=\" + XKit.extensions.one_click_reply.preferences.auto_tag_text.value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tXKit.extensions.one_click_reply.quick_reply_close();\n\t\t\twindow.open(m_url);\n\n\t\t});\n\n\n\t},\n\n\tquick_reply_close: function() {\n\n\t\t$(\"#xkit-one-click-reply-quick-reply-window-shadow, #xkit-one-click-reply-quick-reply-window\").fadeOut('fast');\n\n\t},\n\n\texit_pn: function(event) {\n\n\t\tvar n_box = event.target;\n\n\t\tif ($(n_box).hasClass(\"note\") === false || $(n_box).hasClass(\"action\") === true) {\n\t\t\t// Must be in a sub-div.\n\t\t\tif ($(n_box).hasClass(\"action\") === true) {\n\t\t\t\tn_box = $(n_box).parent();\n\t\t\t} else {\n\t\t\t\tn_box = $(n_box).parentsUntil(\".note\").parent();\n\t\t\t}\n\t\t}\n\n\t\t$(n_box).find(\".xkit-reply-button-pn\").css(\"display\",\"none\");\n\n\n\t},\n\n\tenter_pn: function(event) {\n\n\t\tvar n_box = event.target;\n\t\tvar new_style = false;\n\t\tvar in_box = false;\n\n\t\tif ($(n_box).attr('class').indexOf(\"part_\") !== -1 ||$(n_box).hasClass(\"xkit-activity-plus-timestamp\")) {\n\n\t\t\tif ($(n_box).hasClass(\"xkit-activity-plus-timestamp\")) {\n\t\t\t\tn_box = $(n_box).parent();\n\t\t\t} else {\n\t\t\t\tn_box = $(n_box).parentsUntil(\".ui_note\").parent();\n\t\t\t}\n\n\t\t\tnew_style = true;\n\n\t\t} else {\n\n\t\t\tif ($(n_box).hasClass(\"note\") === false || $(n_box).hasClass(\"action\") === true) {\n\t\t\t\t// Must be in a sub-div.\n\t\t\t\tif ($(n_box).hasClass(\"action\") === true) {\n\t\t\t\t\tn_box = $(n_box).parent();\n\t\t\t\t} else {\n\t\t\t\t\tn_box = $(n_box).parentsUntil(\".note\").parent();\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif ($(n_box).parent().parent().hasClass('popover_scroll')) {\n\t\t\tin_box = true;\n\t\t}\n\n\t\tif (typeof $(n_box).attr('class') === \"undefined\") { return; }\n\n\t\tif ($(n_box).find(\".xkit-reply-button-pn\").length <= 0) {\n\n\t\t\tvar m_html = \"<a onclick=\\\"return false\\\" class=\\\"xkit-reply-button-pn\\\">reply</a>\";\n\t\t\tif (new_style) {\n\t\t\t\tm_html = \"<div class=\\\"xkit-reply-button-pn xkit-notes-new-style-fix\\\">reply</div>\";\n\t\t\t}\n\t\t\tvar flush_to_right = false;\n\t\t\tif (in_box) {\n\t\t\t\tif ($(n_box).find(\".follow\").length > 0) {\n\t\t\t\t\tif ($(n_box).find(\"a.follow\").css(\"display\") !== \"block\") {\n\t\t\t\t\t\tflush_to_right = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tflush_to_right = true;\n\t\t\t\t}\n\t\t\t\tif ($(n_box).hasClass(\"reblog\")) { flush_to_right = false; }\n\t\t\t\tm_html = \"<a onclick=\\\"return false\\\" class=\\\"xkit-reply-button-pn xkit-notes-new-style-fix-pn\\\">reply</a>\";\n\t\t\t}\n\n\t\t\t$(n_box).append(m_html);\n\n\t\t\tif (flush_to_right) {\n\t\t\t\t$(n_box).find(\".xkit-reply-button-pn\").addClass(\"xkit-reply-button-flush-to-right\");\n\t\t\t}\n\n\t\t\tvar m_right = 30 + $(n_box).find(\".xkit-reply-button-pn\").width();\n\t\t\tvar m_new_right = m_right + 5;\n\n\t\t\tif (in_box) {\n\t\t\t\tif (flush_to_right === true) {\n\t\t\t\t\tm_right = 17 + $(n_box).find(\".xkit-reply-button-pn\").width();\n\t\t\t\t} else {\n\t\t\t\t\tm_right = 50 + $(n_box).find(\".xkit-reply-button-pn\").width();\n\t\t\t\t}\n\t\t\t\tconsole.log(\"RIGHT => \" + m_right + \" ||push_to_right => \" + flush_to_right);\n\t\t\t\t$(n_box).find(\"a.block\").css(\"right\", m_right + \"px\");\n\t\t\t}\n\n\t\t\t/*if (XKit.extensions.one_click_reply.added_css_pn !== true) {\n\n\t\t\t\tXKit.tools.add_css(\"#posts .notes_outer_container.popover .note.like a.block { right: \" + m_right + \"px !important; }\", \"one_click_reply\");\n\t\t\t\tXKit.extensions.one_click_reply.added_css_pn = true;\n\t\t\t}*/\n\n\t\t\tif (XKit.extensions.one_click_reply.added_css_pn_new !== true) {\n\t\t\t\tXKit.tools.add_css(\".ui_notes .ui_note .part_ignore { right: \" + m_new_right + \"px !important; }\", \"one_click_reply\");\n\t\t\t\tXKit.extensions.one_click_reply.added_css_pn_new = true;\n\t\t\t}\n\n\t\t}\n\n\t\t$(n_box).find(\".xkit-reply-button-pn\").css(\"display\",\"block\");\n\n\n\t},\n\n\tenter: function(event) {\n\n\t\tvar n_box = event.target;\n\t\tif ($(n_box).hasClass(\"notification\") === false || $(n_box).hasClass(\"notification_inner\") === true) {\n\t\t\t// Must be in a sub-div.\n\t\t\tif ($(n_box).hasClass(\"notification_inner\") === true) {\n\t\t\t\tn_box = $(n_box).parent();\n\t\t\t} else {\n\t\t\t\tn_box = $(n_box).parentsUntil(\".notification\").parent();\n\t\t\t}\n\t\t}\n\n\t\tif ($(n_box).find(\".xkit-reply-button\").length < 1) {\n\t\t\tvar m_html = \"<a onclick=\\\"return false\\\" class=\\\"xkit-reply-button\\\">reply</a>\";\n\t\t\tif ($(n_box).find(\".block\").length > 0) {\n\t\t\t\t$(n_box).find(\".block\").after(m_html);\n\t\t\t} else {\n\t\t\t\t$(n_box).find(\".notification_sentence\").append(m_html);\n\n\t\t\t\tif ($(n_box).hasClass(\"xkit-old-notifications\")) {\n\t\t\t\t\t$(n_box).find(\".xkit-reply-button\").css(\"top\",\"16px\");\n\t\t\t\t} else {\n\t\t\t\t\t$(n_box).find(\".xkit-reply-button\").css(\"top\",\"16px\");\n\t\t\t\t}\n\t\t\t\tif ($(n_box).hasClass(\"stretchy_kid_container\") === true) {\n\t\t\t\t\t$(n_box).find(\".xkit-reply-button\").css(\"right\",\"8px\");\n\t\t\t\t} else {\n\t\t\t\t\tif ($(n_box).hasClass(\"xkit-old-notifications\")) {\n\t\t\t\t\t\t$(n_box).find(\".xkit-reply-button\").css(\"right\",\"43px\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(n_box).find(\".xkit-reply-button\").css(\"right\",\"38px\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar m_right = 45 + $(n_box).find(\".xkit-reply-button\").width();\n\t\t\tif (XKit.extensions.one_click_reply.added_css !== true) {\n\t\t\t\tXKit.tools.add_css(\".notification .block, .notification .ignore { right: \" + m_right + \"px !important; }\", \"one_click_reply\");\n\t\t\t\tXKit.extensions.one_click_reply.added_css = true;\n\t\t\t}\n\t\t}\n\n\t},\n\n\tfill_post: function() {\n\t\tvar raw_data = XKit.tools.get_setting(\"xkit_one_click_reply_data\", \"{}\");\n\n\t\ttry {\n\t\t\tvar data = JSON.parse(raw_data);\n\n\t\t\tif (!data || !data.sentence) {\n\t\t\t\t// Terribly enough, we can't alert an error here because\n\t\t\t\t// post_window_listener might just not be referring to us\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar m_sentence = $.trim(data.sentence);\n\t\t\tvar tags = data.tags;\n\n\t\t\tif (XKit.extensions.one_click_reply.preferences.mention_people.value) {\n\t\t\t\tvar sentence_obj = $(\"<div>\" + m_sentence + \"</div>\");\n\n\t\t\t\t$(sentence_obj).find(\"a\").each(function() {\n\t\t\t\t\tif (typeof $(this).attr('href') !== \"undefined\") {\n\t\t\t\t\t\tif ($(this).attr('href').indexOf('/post/') === -1) {\n\t\t\t\t\t\t\t$(this).removeAttr('href').removeAttr('class').addClass(\"tumblelog\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tm_sentence = sentence_obj.html();\n\t\t\t}\n\n\t\t\tif (tags) {\n\t\t\t\tXKit.interface.post_window.add_tag(tags.split(\",\"));\n\t\t\t}\n\t\t\tXKit.interface.post_window.set_content_html(m_sentence + \"<p><br/></p>\");\n\t\t\tXKit.interface.post_window_listener.remove(\"one_click_reply_fill_post\");\n\t\t\tXKit.tools.set_setting(\"xkit_one_click_reply_data\", \"{}\");\n\t\t} catch(e) {\n\t\t\talert(\"OCR: Error \\\"\" + e.message + \"\\\", data = \" + raw_data);\n\t\t}\n\t},\n\n\tmake_post_pn: function(obj, silent_mode) {\n\n\t\tobj = $(obj).parent();\n\n\t\tif ($(obj).hasClass(\"note\") === false || $(obj).hasClass(\"action\") === true) {\n\t\t\t// Must be in a sub-div.\n\t\t\tif ($(obj).hasClass(\"action\") === true) {\n\t\t\t\tn_box = $(obj).parent();\n\t\t\t} else {\n\t\t\t\tn_box = $(obj).parentsUntil(\".note\").parent();\n\t\t\t}\n\t\t}\n\n\t\tif ($(obj).hasClass(\"ui_note\")) {\n\t\t\t// New style notifications!\n\t\t\treturn XKit.extensions.one_click_reply.make_post_activity(obj, silent_mode);\n\t\t}\n\n\t\t// Let's first get the type:\n\t\tvar m_post_type = \"\";\n\t\tvar m_sentence = \"\";\n\n\t\tif ($(obj).hasClass(\"is_reply\") === true ||$(obj).hasClass(\"reply\") === true) { m_post_type = \"reply\"; m_sentence = XKit.extensions.one_click_reply.sentences.reply; }\n\t\tif ($(obj).find(\".photo_reply_image_container\").length > 0) { m_post_type = \"reply\"; m_sentence = XKit.extensions.one_click_reply.sentences.reply_photo; }\n\t\tif ($(obj).hasClass(\"is_like\") === true || $(obj).hasClass(\"like\") === true) { m_post_type = \"like\"; m_sentence = XKit.extensions.one_click_reply.sentences.like;  }\n\t\tif ($(obj).hasClass(\"is_answer\") === true || $(obj).hasClass(\"answer\") === true) { m_post_type = \"answer\"; m_sentence = XKit.extensions.one_click_reply.sentences.answer;  }\n\t\tif ($(obj).hasClass(\"is_reblog\") === true || $(obj).hasClass(\"reblog\") === true) {\n\t\t\tm_post_type = \"reblog\";\n\t\t\tm_sentence = XKit.extensions.one_click_reply.sentences.reblog;\n\t\t\tif ($(obj).hasClass(\"with_commentary\") === true) {\n\t\t\t\tm_post_type = \"reblog_text\";\n\t\t\t\tm_sentence = XKit.extensions.one_click_reply.sentences.reblog_with_comments;\n\t\t\t}\n\t\t}\n\n\t\tvar post_div = $(obj).parentsUntil(\".post\").parent();\n\t\tvar post_url = $(post_div).find(\".post_permalink\").attr('href');\n\n\t\t// Then the post contents:\n\t\tvar post_contents = \"\";\n\t\tvar contains_html = false;\n\t\tif ($(post_div).find(\".post_title\").length > 0) {\n\t\t\t// This post has a title! Let's use it.\n\t\t\tpost_contents = $(post_div).find(\".post_title\").html();\n\t\t} else {\n\t\t\t// Nope. Let's look at the contents.\n\t\t\tif ($(post_div).find(\".post_text_wrapper\").length > 0) {\n\t\t\t\t// This is a text post!\n\t\t\t\tpost_contents = $(post_div).find(\".post_text_wrapper\").html();\n\t\t\t}else {\n\t\t\t\t// This is probably an image or audio post.\n\t\t\t\t\tif ($(post_div).find(\".caption\").length > 0) {\n\t\t\t\t\t\t// This is an image.\n\t\t\t\t\t\tpost_contents = $(post_div).find(\".caption\").html();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ($(post_div).find(\".post_body\").length > 0) {\n\t\t\t\t\t\t\tpost_contents = $(post_div).find(\".post_body\").html();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif ($(post_div).find(\".link_title\").length > 0) {\n\t\t\t\t\t\t\t\tpost_contents = $(post_div).find(\".post_body\").html();\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpost_contents = post_contents.replace(/<(?:.|\\n)*?>/gm, '');\n\t\tif (post_contents.length > 40 && !contains_html) {\n\t\t\tpost_contents = post_contents.substring(0, 38) + \"...\";\n\t\t}\n\n\t\t// Example sentence:\n\t\t// \"<p><a href=\\\"%l\\\">%u</a> reblogged <a href=\\\"%p\\\">your post</a> and added:</p><blockquote><p>%r<p></blockquote>\"\n\n\t\tvar sentence_p = post_url;\n\n\t\tvar user_name = \"\";\n\t\tvar user_url = \"\";\n\t\tvar commentary = $(obj).find(\".answer_content\").html();\n\n\t\tif ($(obj).find(\".photo_reply_image_container\").length > 0) {\n\t\t\tcommentary = $(obj).find(\".photo_reply_image_container\").html();\n\t\t}\n\n\t\tif (m_post_type === \"reblog_text\") {\n\t\t\tcommentary = $(obj).find(\"blockquote\").html();\n\t\t\tif ($(obj).find(\"blockquote\").find(\"a\").length > 0) {\n\t\t\t\tcommentary = $(obj).find(\"blockquote\").find(\"a\").html();\n\t\t\t}\n\t\t}\n\n\t\tif (m_post_type === \"reblog\" ||m_post_type === \"reblog_text\") {\n\t\t\tuser_name = $(obj).data(\"tumblelog\");\n\t\t\tuser_url = $(obj).find(\"a.avatar_frame\").attr('href');\n\t\t}\n\n\t\tif (m_post_type === \"like\" || m_post_type === \"reply\" || m_post_type === \"answer\") {\n\t\t\tuser_name = $(obj).data(\"tumblelog\");\n\t\t\tuser_url = $(obj).find(\"a.avatar_frame\").attr('href');\n\t\t}\n\n\t\tif (XKit.extensions.one_click_reply.preferences.tag_person_replace_hyphens.value === true) {\n\t\t\ttry {\n\t\t\t\tuser_name = user_name.replace(/-/g, ' ');\n\t\t\t} catch(e) {\n\t\t\t\tconsole.log(\"Cant replace hyphens, \" + e.message);\n\t\t\t}\n\t\t}\n\n\t\t//alert(\"post_contents: \\n\" + post_contents);\n\t\t//alert(\"commentary: \\n\" + commentary);\n\t\t//alert(\"m_sentence: \\n\" + m_sentence + \"\\n\\nm_post_type:\\n\" + m_post_type);\n\n\t\tif ($.trim(post_contents) === \"\") {\n\n\t\t\tif (m_post_type === \"reply_photo\") {\n\t\t\t\tm_sentence = XKit.extensions.one_click_reply.sentences.nt_reply_photo;\n\t\t\t}\n\n\t\t\tif (m_post_type === \"reply\") {\n\t\t\t\tm_sentence = XKit.extensions.one_click_reply.sentences.nt_reply;\n\t\t\t}\n\n\t\t\tif (m_post_type === \"like\") {\n\t\t\t\tm_sentence = XKit.extensions.one_click_reply.sentences.nt_like;\n\t\t\t}\n\n\t\t\tif (m_post_type === \"answer\") {\n\t\t\t\tm_sentence = XKit.extensions.one_click_reply.sentences.nt_answer;\n\t\t\t}\n\n\t\t\tif ($(obj).hasClass(\"reblog\") === true) {\n\t\t\t\tm_sentence = XKit.extensions.one_click_reply.sentences.nt_reblog;\n\t\t\t\tif ($(obj).hasClass(\"with_commentary\") === true) {\n\t\t\t\t\tm_sentence = XKit.extensions.one_click_reply.sentences.nt_reblog_with_comments;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif (XKit.extensions.one_click_reply.preferences.mention_people.value === true) {\n\t\t\tm_sentence = m_sentence.replace(\"%l\", user_url + \"\\\" class=\\\"tumblelog\\\"\");\n\t\t} else {\n\t\t\tm_sentence = m_sentence.replace(\"%l\", user_url);\n\t\t}\n\t\tm_sentence = m_sentence.replace(\"%u\", user_name);\n\t\tm_sentence = m_sentence.replace(\"%p\", post_url);\n\t\tm_sentence = m_sentence.replace(\"%r\", commentary);\n\t\tm_sentence = m_sentence.replace(\"%t\", post_contents);\n\n\t\tm_sentence = XKit.extensions.one_click_reply.strip_sentence(m_sentence);\n\n\t\tif (XKit.extensions.one_click_reply.preferences.show_avatars.value === true) {\n\t\t\t// Fetch the avatar, slugify it to sentence.\n\t\t\tvar avatar_url = $(obj).find(\".avatar_frame\").find(\".avatar\").attr('src');\n\t\t\t// This is ugly but it works:\n\t\t\tavatar_url_start = avatar_url.indexOf('.media.tumblr.com');\n\t\t\tif (avatar_url_start !== -1) {\n\t\t\t\tavatar_url = \"https://31.\" + avatar_url.substring(avatar_url_start + 1);\n\t\t\t}\n\t\t\tm_sentence = \"<img src=\\\"\" + avatar_url + \"\\\" class=\\\"image_thumbnail\\\">\" + m_sentence;\n\t\t}\n\n\t\tvar m_url = \"http://www.tumblr.com/new/text\";\n\n\t\tif (document.location.href.indexOf(\"/blog/\") !== -1) {\n\t\t\t// Maybe we can make this better?\n\t\t\tm_url = $(\"#new_post_label_text\").attr('href');\n\t\t}\n\n\t\tif (m_url.indexOf('?') !== -1) {\n\t\t\tm_url = m_url.substring(0, m_url.indexOf('?'));\n\t\t}\n\n\t\tvar m_tags_to_return = \"\";\n\n\t\tif (this.preferences.tag_people.value === true) {\n\t\t\tm_url = m_url + \"?tags=\" + user_name;\n\t\t\tm_tags_to_return = user_name;\n\t\t\tif (this.preferences.auto_tag.value === true && this.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\tm_url = m_url + \",\" + this.preferences.auto_tag_text.value;\n\t\t\t\tm_tags_to_return = m_tags_to_return + \",\" + this.preferences.auto_tag_text.value;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.preferences.auto_tag.value === true && this.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\tm_url = m_url + \"?tags=\" + this.preferences.auto_tag_text.value;\n\t\t\t\tm_tags_to_return = m_tags_to_return + \",\" + this.preferences.auto_tag_text.value;\n\t\t\t}\n\t\t}\n\n\t\tvar data = {\n\t\t\tsentence: m_sentence,\n\t\t\ttags: m_tags_to_return\n\t\t};\n\n\t\tif (silent_mode === true) {\n\t\t\treturn data;\n\t\t} else {\n\t\t\tXKit.tools.set_setting(\"xkit_one_click_reply_data\", JSON.stringify(data));\n\n\t\t\tif (this.preferences.open_in_new_tab.value === true) {\n\t\t\t\twindow.open(m_url,'_BLANK');\n\t\t\t} else {\n\t\t\t\tdocument.location.href = m_url;\n\t\t\t}\n\n\t\t}\n\n\t\t// document.location.href = m_url;\n\n\t},\n\n\tmake_post: function(obj, pn_mode, event, silent_mode) {\n\n\t\tif (XKit.extensions.one_click_reply.preferences.enable_quick_reply.value === true && silent_mode !== true) {\n\t\t\tif (!event.altKey && !pn_mode) {\n\t\t\t\t// Do not open window if pressing alt key to select items.\n\t\t\t\tif ($(\".xkit-reply-selected\").length <= 0 && $(\".xkit-reply-selected-pn\").length <= 0) {\n\t\t\t\t\t// Do not open window if there are selected items.\n\n\t\t\t\t\tvar m_return = XKit.extensions.one_click_reply.make_post(obj, false, \"\", true);\n\t\t\t\t\tXKit.extensions.one_click_reply.quick_reply_open(m_return.sentence, m_return.tags, m_return.avatar, m_return.username);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (XKit.extensions.one_click_reply.preferences.multi_reply.value === true && silent_mode !== true) {\n\t\t\tif (event.altKey) {\n\t\t\t\tvar alt_obj = $(obj);\n\t\t\t\tif (pn_mode === true) {\n\t\t\t\t\talt_obj = alt_obj.parent();\n\t\t\t\t\talt_obj.toggleClass(\"xkit-reply-selected-pn\");\n\t\t\t\t} else {\n\t\t\t\t\talt_obj.toggleClass(\"xkit-reply-selected\");\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tif ($(\".xkit-reply-selected\").length > 0 || $(\".xkit-reply-selected-pn\").length > 0) {\n\t\t\t\t\t// There are selected posts!\n\t\t\t\t\tif ($(obj).hasClass(\"xkit-reply-selected\") === false && $(obj).hasClass(\"xkit-reply-selected-pn\") === false) {\n\t\t\t\t\t\t// Add this too.\n\t\t\t\t\t\tvar m_obj = $(obj);\n\t\t\t\t\t\tif (pn_mode === true) {\n\t\t\t\t\t\t\tm_obj = $(obj).parent();\n\t\t\t\t\t\t\t$(m_obj).addClass(\"xkit-reply-selected-pn\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$(m_obj).addClass(\"xkit-reply-selected\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar m_text = \"\";\n\t\t\t\t\tvar m_tags = \"\";\n\n\t\t\t\t\t$(\".notification.xkit-reply-selected, .xkit-reply-selected-pn\").each(function() {\n\n\t\t\t\t\t\t// Cycle thru all the posts and gather information.\n\n\t\t\t\t\t\tif ($(this).hasClass(\"xkit-reply-selected-pn\") === true) {\n\t\t\t\t\t\t\tvar pn_post = XKit.extensions.one_click_reply.make_post_pn($(this).find(\".xkit-reply-button-pn\"), true);\n\t\t\t\t\t\t\tm_tags = m_tags + \",\" + pn_post.tags;\n\t\t\t\t\t\t\tm_text = m_text + pn_post.sentence + \"<p></p>\";\n\t\t\t\t\t\t\t// m_text = m_text + XKit.extensions.one_click_reply.make_post_pn(this, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar standard_post = XKit.extensions.one_click_reply.make_post(this, pn_mode, \"\", true);\n\t\t\t\t\t\t\tm_tags = m_tags + \",\" + standard_post.tags;\n\t\t\t\t\t\t\tm_text = m_text + standard_post.sentence + \"<p></p>\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tsentence: m_text,\n\t\t\t\t\t\ttags: m_tags\n\t\t\t\t\t};\n\t\t\t\t\tXKit.tools.set_setting(\"xkit_one_click_reply_data\", JSON.stringify(data));\n\n\t\t\t\t\tvar m_url = \"http://www.tumblr.com/new/text\";\n\n\t\t\t\t\tif (document.location.href.indexOf(\"/blog/\") !== -1) {\n\t\t\t\t\t\t// Maybe we can make this better?\n\t\t\t\t\t\tif ($(\"#new_post_label_text\").length > 0) {\n\t\t\t\t\t\t\tm_url = $(\"#new_post_label_text\").attr('href');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tm_url = $(\"body\").attr('data-new-root') + \"/new/text\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (m_url.indexOf('?') !== -1) {\n\t\t\t\t\t\tm_url = m_url.substring(0, m_url.indexOf('?'));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.preferences.tag_people.value === true) {\n\t\t\t\t\t\tm_url = m_url + \"?tags=\" + m_tags;\n\t\t\t\t\t\tif (this.preferences.auto_tag.value === true && this.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\t\t\t\tm_url = m_url + \",\" + this.preferences.auto_tag_text.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this.preferences.auto_tag.value === true && this.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\t\t\t\tm_url = m_url + \"?tags=\" + this.preferences.auto_tag_text.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$(\".xkit-reply-selected\").removeClass(\"xkit-reply-selected\");\n\t\t\t\t\t$(\".xkit-reply-selected-pn\").removeClass(\"xkit-reply-selected-pn\");\n\n\t\t\t\t\tif (this.preferences.open_in_new_tab.value === true) {\n\t\t\t\t\t\twindow.open(m_url,'_BLANK');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdocument.location.href = m_url;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tif (pn_mode === true) {\n\t\t\tXKit.extensions.one_click_reply.make_post_pn(obj);\n\t\t\treturn;\n\t\t}\n\n\ttry {\n\n\t\treturn XKit.extensions.one_click_reply.make_post_reg(obj, pn_mode, event, silent_mode);\n\n\t} catch(e) {\n\t\talert(\"On 102: \" + e.message);\n\t}\n\t},\n\n\tmake_post_reg: function(obj, pn_mode, event, silent_mode) {\n\n\t\tvar username = $(obj).find(\".username\").html();\n\t\tvar real_username = username;\n\n\t\tif (XKit.extensions.one_click_reply.preferences.tag_person_replace_hyphens.value === true) {\n\t\t\ttry {\n\t\t\t\tusername = username.replace(/-/g, ' ');\n\t\t\t} catch(e) {\n\t\t\t\tconsole.log(\"Cant replace hyphens, \" + e.message);\n\t\t\t}\n\t\t}\n\n\t\tvar m_sentence = \"\";\n\n\t\tif ( $(obj).find(\".notification_sentence\").find(\".hide_overflow\") > 0) {\n\t\t\tm_sentence = \"<p>\" + $(obj).find(\".notification_sentence\").find(\".hide_overflow\").html() + \"</p>\";\n\t\t\tif ($(obj).find(\".notification_sentence\").attr('data-xkit-text-version-html')) {\n\t\t\t\tvar text_html = $(obj).find(\".notification_sentence\").attr('data-xkit-text-version-html');\n\t\t\t\tm_sentence = \"<p>\" + $(text_html).find(\".hide_overflow\").html() + \"</p>\";\n\t\t\t}\n\n\t\t} else {\n\t\t\tvar tmp_div = $(obj).find(\".notification_sentence\");\n\t\t\t$(\".xkit-reply-button\", tmp_div).remove();\n\t\t\t$(\".xkit-notification-notification-block-button\", tmp_div).remove();\n\t\t\tvar tmp_html = $(tmp_div).html();\n\n\t\t\tif ($(tmp_div).attr('data-xkit-text-version-html')) {\n\t\t\t\ttmp_html = $(tmp_div).attr('data-xkit-text-version-html');\n\t\t\t\ttmp_html = decodeURIComponent(escape(atob(tmp_html)));\n\t\t\t}\n\n\t\t\tm_sentence = \"<p>\" + tmp_html + \"</p>\";\n\t\t}\n\n\t\tm_sentence = XKit.extensions.one_click_reply.strip_sentence(m_sentence);\n\n\t\t// Fetch the avatar, slugify it to sentence.\n\t\tvar m_obj = $(obj);\n\n\n\t\t/*if ($(m_obj).hasClass(\"stretchy_kids\") === true ||$(m_obj).hasClass(\"notification_follower\") === true) {\n\t\t\tm_obj = $(m_obj).parent();\n\t\t}\n\n\t\tif ($(m_obj).hasClass(\"stretchy_kid\") === true || $(m_obj).hasClass(\"stretchy_kid_container\") === true) {\n\t\t\tm_obj = $(m_obj).parent().parent();\n\t\t}*/\n\n\t\t/*if ($(m_obj).hasClass(\"notification_follower\") === true) {\n\n\t\t}*/\n\n\t\tconsole.log(\" -- Now: \" + $(m_obj).attr('class'));\n\t\tvar avatar_url = $(m_obj).find(\".avatar_frame\").find(\".avatar\").attr('src');\n\t\t// This is ugly but it works:\n\t\ttry {\n\t\t\tavatar_url_start = avatar_url.indexOf('.media.tumblr.com');\n\t\t} catch(e) {\n\t\t\tconsole.log(\"Can't fetch avatar.\");\n\t\t}\n\t\tif (avatar_url_start !== -1) {\n\t\t\tavatar_url = \"https://31.\" + avatar_url.substring(avatar_url_start + 1);\n\t\t}\n\n\t\tif (XKit.extensions.one_click_reply.preferences.show_avatars.value === true) {\n\t\t\tm_sentence = \"<img src=\\\"\" + avatar_url + \"\\\" class=\\\"image_thumbnail\\\">\" + m_sentence;\n\t\t}\n\n\t\tvar m_url = \"http://www.tumblr.com/new/text\";\n\n\t\tif (document.location.href.indexOf(\"/blog/\") !== -1) {\n\t\t\t// Maybe we can make this better?\n\t\t\tm_url = $(\"#new_post_label_text\").attr('href');\n\t\t}\n\n\t\tif (m_url.indexOf('?') !== -1) {\n\t\t\tm_url = m_url.substring(0, m_url.indexOf('?'));\n\t\t}\n\n\t\tvar m_tags_to_return = \"\";\n\n\t\tif (this.preferences.tag_people.value === true) {\n\t\t\tm_url = m_url + \"?tags=\" + username;\n\t\t\tm_tags_to_return = username;\n\t\t\tif (this.preferences.auto_tag.value === true && this.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\tm_url = m_url + \",\" + this.preferences.auto_tag_text.value;\n\t\t\t\tm_tags_to_return = m_tags_to_return + \",\" + this.preferences.auto_tag_text.value;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.preferences.auto_tag.value === true && this.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\tm_url = m_url + \"?tags=\" + this.preferences.auto_tag_text.value;\n\t\t\t\tm_tags_to_return = m_tags_to_return + \",\" + this.preferences.auto_tag_text.value;\n\t\t\t}\n\t\t}\n\n\t\tvar data = {\n\t\t\tsentence: m_sentence,\n\t\t\ttags: m_tags_to_return\n\t\t};\n\n\t\tif (silent_mode === true) {\n\t\t\tdata.avatar = avatar_url;\n\t\t\tdata.username = real_username;\n\t\t\treturn data;\n\t\t} else {\n\t\t\tXKit.tools.set_setting(\"xkit_one_click_reply_data\", JSON.stringify(data));\n\n\t\t\tif (this.preferences.open_in_new_tab.value === true) {\n\t\t\t\twindow.open(m_url,'_BLANK');\n\t\t\t} else {\n\t\t\t\tdocument.location.href = m_url;\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tmake_post_activity: function(obj, silent_mode) {\n\n\t\tvar username = $(obj).attr('data-tumblelog-name');\n\t\tvar post_url = $(obj).find(\".part_glass\").attr('href');\n\n\t\tvar m_sentence = \"\";\n\t\tif ( $(obj).find(\".part_main\").length > 0) {\n\t\t\tm_sentence = \"<p>\" + $(obj).find(\".part_main\").html() + \"</p>\";\n\t\t\tif ($(obj).find(\".part_main\").attr('data-xkit-text-version-html')) {\n\t\t\t\tm_sentence = $(obj).find(\".part_main\").attr('data-xkit-text-version-html');\n\t\t\t\tm_sentence = decodeURIComponent(escape(atob(m_sentence)));\n\t\t\t}\n\t\t} else {\n\t\t\tvar tmp_div = $(obj).find(\".notification_sentence\");\n\t\t\t$(\".xkit-reply-button\", tmp_div).remove();\n\t\t\t$(\".xkit-notification-notification-block-button\", tmp_div).remove();\n\t\t\tvar tmp_html = $(tmp_div).html();\n\t\t\tif ($(tmp_div).attr('data-xkit-text-version-html')) {\n\t\t\t\ttmp_html = $(tmp_div).attr('data-xkit-text-version-html');\n\t\t\t\ttmp_html = decodeURIComponent(escape(atob(tmp_html)));\n\t\t\t}\n\t\t\tm_sentence = \"<p>\" + tmp_html + \"</p>\";\n\t\t}\n\n\t\tif ($(\".summary\", m_sentence).length > 0) {\n\t\t\tvar m_new = $(m_sentence);\n\t\t\t$(m_new).find(\".summary\").html($(m_new).find(\".summary\").html());\n\t\t\t$(m_new).find(\".summary\").wrap(\"<a href=\\\"\" + post_url + \"\\\"></a>\");\n\t\t\t$(m_new).find(\".summary\").parent().before(\" \");\n\t\t\tm_sentence = $(m_new).html();\n\t\t}\n\n\t\tif ($(obj).find(\".part_response\").length > 0) {\n\t\t\tm_sentence = m_sentence + $(obj).find(\".part_response\").html();\n\t\t}\n\n\t\tm_sentence = XKit.extensions.one_click_reply.strip_sentence(m_sentence);\n\n\t\tif (XKit.extensions.one_click_reply.preferences.show_avatars.value === true) {\n\t\t\t// Fetch the avatar, slugify it to sentence.\n\t\t\tvar m_obj = $(obj);\n\n\t\t\tconsole.log(\" -- Now: \" + $(m_obj).attr('class'));\n\t\t\tvar avatar_url = $(m_obj).find(\".part_avatar\").find(\".ui_avatar_link\").attr('data-avatar-url');\n\n\t\t\tavatar_url = avatar_url.replace(\"_64.png\",\"_40.png\");\n\t\t\tavatar_url = avatar_url.replace(\"_64.gif\",\"_40.gif\");\n\t\t\tavatar_url = avatar_url.replace(\"_64.jpg\",\"_40.jpg\");\n\t\t\tavatar_url = avatar_url.replace(\"_128.png\",\"_40.png\");\n\t\t\tavatar_url = avatar_url.replace(\"_128.gif\",\"_40.gif\");\n\t\t\tavatar_url = avatar_url.replace(\"_128.jpg\",\"_40.jpg\");\n\t\t\t// This is ugly but it works:\n\t\t\ttry {\n\t\t\t\tavatar_url_start = avatar_url.indexOf('.media.tumblr.com');\n\t\t\t} catch(e) {\n\t\t\t\tconsole.log(\"Can't fetch avatar.\");\n\t\t\t}\n\t\t\tif (avatar_url_start !== -1) {\n\t\t\t\tavatar_url = \"https://31.\" + avatar_url.substring(avatar_url_start + 1);\n\t\t\t}\n\t\t\tm_sentence = \"<p><img src=\\\"\" + avatar_url + \"\\\" class=\\\"image_thumbnail\\\"></p>\" + m_sentence;\n\t\t}\n\n\t\tvar m_url = \"http://www.tumblr.com/new/text\";\n\n\t\tif (document.location.href.indexOf(\"/blog/\") !== -1) {\n\t\t\t// Maybe we can make this better?\n\t\t\tm_url = $(\"body\").attr('data-new-root') + \"/new/text\";\n\t\t}\n\n\t\tif (m_url.indexOf('?') !== -1) {\n\t\t\tm_url = m_url.substring(0, m_url.indexOf('?'));\n\t\t}\n\n\t\tvar m_tags_to_return = \"\";\n\n\t\tif (this.preferences.tag_people.value === true) {\n\t\t\tm_url = m_url + \"?tags=\" + username;\n\t\t\tm_tags_to_return = username;\n\t\t\tif (this.preferences.auto_tag.value === true && this.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\tm_url = m_url + \",\" + this.preferences.auto_tag_text.value;\n\t\t\t\tm_tags_to_return = m_tags_to_return + \",\" + this.preferences.auto_tag_text.value;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.preferences.auto_tag.value === true && this.preferences.auto_tag_text.value !== \"\") {\n\t\t\t\tm_url = m_url + \"?tags=\" + this.preferences.auto_tag_text.value;\n\t\t\t\tm_tags_to_return = m_tags_to_return + \",\" + this.preferences.auto_tag_text.value;\n\t\t\t}\n\t\t}\n\n\t\tvar data = {\n\t\t\tsentence: m_sentence,\n\t\t\ttags: m_tags_to_return\n\t\t};\n\t\tif (silent_mode === true) {\n\t\t\treturn data;\n\t\t} else {\n\t\t\tXKit.tools.set_setting(\"xkit_one_click_reply_data\", JSON.stringify(data));\n\n\t\t\tif (this.preferences.open_in_new_tab.value === true) {\n\t\t\t\twindow.open(m_url,'_BLANK');\n\t\t\t} else {\n\t\t\t\tdocument.location.href = m_url;\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tstrip_sentence: function(m_sentence) {\n\n\t\tm_sentence = XKit.tools.replace_all(m_sentence, \"[[MORE]]\", \"\");\n\t\tm_sentence = m_sentence.replace(/[^ -~]/g, function(chr) {\n\t\t\treturn \"&#\"+chr.charCodeAt(0)+\";\";\n\t\t});\n\n\t\tm_sentence = m_sentence.replace(\"<p></p>\",\"\");\n\t\treturn m_sentence;\n\n\t},\n\n\tdestroy: function() {\n\t\tXKit.tools.remove_css(\"one_click_reply\");\n\t\tXKit.extensions.one_click_reply.added_css = false;\n\t\t$(\".xkit-reply-button, .xkit-reply-button-pn, #xkit-one-click-reply-quick-reply-window\").remove();\n\t\t$(document).off(\"mouseleave\",\".post.is_mine .notes_container .note, .ui_notes .ui_note\", XKit.extensions.one_click_reply.exit_pn);\n\t\t$(document).off(\"mouseenter\",\".post.is_mine .notes_container .note, .ui_notes .ui_note\", XKit.extensions.one_click_reply.enter_pn);\n\t\t$(document).off(\"mouseenter\",\".notification\", XKit.extensions.one_click_reply.enter);\n\t}\n\n});\n","icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Mjg3MzQ3NUUzODVCMTFFM0ExQ0FBQzk4RDE5Q0VGNzkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Mjg3MzQ3NUYzODVCMTFFM0ExQ0FBQzk4RDE5Q0VGNzkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQTVBOThGNTM4NUExMUUzQTFDQUFDOThEMTlDRUY3OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQTVBOThGNjM4NUExMUUzQTFDQUFDOThEMTlDRUY3OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmdzghUAAAKASURBVHjatFa/b9NQEL73fEEKqiuSJWkKDICyIAaSVAyIBSoxAK3Y+g8EIUZAKoxs4V8IYyemShFLgVRIjBEVEhJVpTYRgqS/UjuV00YJSc1zHJtnx84Puz2drO+dne/uPt/LM3m2DAQ0U0EDKjiYGe8H/c/oGIwlEmqJEnA24g7AJaIv0Ra2FaKCRzN/i5RYuibuhavDuMCtA1vXQ1Ua6xY63jxFoXov2TYepyiU9g4cx0O/BhFuRB7HxFvT4gxbXgvflRol5o22tCV93JTelZUhQpHnK84VhYJw/2p2JpYeLILcKK1svShUll1VevnJYfvMxTN3Li+OrnVFWXv/M1lRHISiTCJCgHadAYHAwvXsWOzMYmLiaVK6ONlj0NkEHQsG0v1RPJOcSnsYmCCGniSkiQBHrbtAwXRWwu1Li15nUsvxMJ7lCZlbOkhEM+DPbkbTNkm0BNhF7BqdSIFvuxKaQoOdARQoN1LEPz/jVSnHiciRttqy/wQHxzs8J0W9ka4X5SWf7L8P8+0O8JwUKZi+Uc1Vj775SVAoL/CEzHsdBIyEq8VUs+NRqNXi/I5S5cvvdtBlF4z1YQM+rIc9sH8pzm9Wc3y5vaKx70Q7ORmPelvJfy3NKk2tSrBSqbYp0m16cu7/XHVqu8rniDh7Trhge2xXyUvHhfW91/Wmtgy4jDgitYei4gMdbOy9/bH9qtXpxSNiCOAvozpqyvUWf6QM6g8DxPJFxED4fKrWWPv+595+vab1aJR2UJfNDx4cYUu6SlTcf/NLysFoLINNSyAQ+1FXlnNIHE5mb4YIZ2uWP7szScDvA0cRid8OyBhvjIyfVUvgucwBKc3IPwEGAM6Yut/45WkDAAAAAElFTkSuQmCC","css":".notification:hover .xkit-reply-button {\n\n\tdisplay: block;\n\n}\n\n#xkit-one-click-reply-quick-reply-tags {\n\tdisplay: block;\n\twidth: 100%;\n\tbox-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tborder: 1px solid rgb(200,200,200);\n\tbox-shadow: 0px 1px 0px white;\n\tborder-radius: 4px;\n\tpadding: 5px 10px 5px 24px;\n\tmargin: 0px 0px 5px 0px;\n\tbackground: white no-repeat 7px 50% url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODQyMUI4RUYyMTM2MTFFM0IyMThFNEQ0NkQ3REQ0QzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODQyMUI4RjAyMTM2MTFFM0IyMThFNEQ0NkQ3REQ0QzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NDIxQjhFRDIxMzYxMUUzQjIxOEU0RDQ2RDdERDRDMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4NDIxQjhFRTIxMzYxMUUzQjIxOEU0RDQ2RDdERDRDMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhezIuEAAAB1SURBVHjaYqyqqvrPgAkWtLa2JmIRZ2BCVoTETqiurp6PT8MBqIkHCGliRHISSLEDIechOwmbYgybmNDczkBIE+P///8ZoJwEIjQuADsJ6kZibEL4gQhNYM8jexqfJnhIMaHLYNGEEqxgT2MDsFBBTyIAAQYAnLw4uRj6VRYAAAAASUVORK5CYII=);\n\n}\n\n.xkit-qr-avatar {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 30px;\n\theight: 30px;\n\tborder-radius: 3px;\n\tborder: 1px solid rgba(0,0,0,0.43);\n\tbox-shadow: 0px 1px 0px white;\n}\n\n#xkit-one-click-reply-quick-reply-close {\n\tbackground-image: url(data:image/gif;base64,R0lGODlhEAAQALMNAAAAAPDw8JaWljk5OQMDA9vb26Kioo2NjZmZmXh4eMbGxrS0tDY2Nv///wAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCQzM5MEExQzE4OTMxMUUzQkMzREJCQUM0M0UxRUM1NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCQzM5MEExRDE4OTMxMUUzQkMzREJCQUM0M0UxRUM1NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkJDMzkwQTFBMTg5MzExRTNCQzNEQkJBQzQzRTFFQzU2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJDMzkwQTFCMTg5MzExRTNCQzNEQkJBQzQzRTFFQzU2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAADQAsAAAAABAAEAAABEawyUkrRcE2VRMYGSUAyaQAKDiNKLKiX8bGIjwcdljDqV7NAIbvxxNqGsCeZXbL7WjMUIGglLAIi4mBoBIRDJXFUFI4miURADs=);\n\twidth: 16px; height: 16px;\n\tposition: absolute;\n\ttop: 17px; right: 16px;\n\topacity: 0.24; z-index: 1000;\n\tcursor: pointer;\n}\n\n#xkit-one-click-reply-quick-reply-close:hover {\n\topacity: 0.50;\n}\n\n#xkit-one-click-reply-quick-reply-close.disabled {\n\tcursor: default; opacity: 0.33 !important;\n}\n\n#xkit-one-click-reply-quick-reply-window-shadow {\n\tposition: fixed; top: 0; left: 0;\n\tbackground: rgba(0,0,0,0);\n\theight: 100%; width: 100%;\n\tz-index: 10000; display: none;\n}\n\n#xkit-one-click-reply-quick-reply-title {\n\tposition: relative;\n\theight: 40px;\n\tline-height: 30px;\n\tpadding-left: 45px;\n\tfont-weight: bold;\n\tcolor: rgb(120,120,120);\n\ttext-shadow: 0px 1px 0px white;\n}\n\n#xkit-one-click-reply-quick-reply-window {\n\tposition: fixed;\n\ttop: 50%; margin-top: -90px;\n\tleft: 50%; margin-left: -200px;\n\twidth: 400px;\n\theight: 180px;\n\tbackground: white;\n\tpadding: 10px;\n\tborder-radius: 8px;\n\tbox-shadow: 0px 1px 2px 1px rgba(0,0,0,0.33);\n\tz-index: 10010; display: none;\n}\n\n#xkit-one-click-reply-quick-reply-ok {\n\ttext-align: center;\n\twidth: 163px;\n\tmargin-right: 5px;\n\tfloat: left;\n}\n\n#xkit-one-click-reply-quick-reply-new-tab {\n\ttext-align: center;\n\twidth: 163px;\n\tmargin-right: 0px;\n\tmargin-left: 5px;\n\tfloat: left;\n}\n\n#xkit-one-click-reply-quick-reply-text {\n\tborder: 1px solid rgb(200,200,200);\n\tresize: none;\n\twidth: 100%;\n\tpadding: 10px;\n\tborder-radius: 4px;\n\tbox-shadow: 0px 1px 0px white;\n\tfont-size: 14px;\n\tcolor: rgb(40,40,40);\n\theight: 50px;\n}\n\n.ui_note {\n\tposition: relative !important;\n}\n\n.notification.xkit-reply-selected {\n\tbackground: green !important;\n}\n\n.note.xkit-reply-selected-pn {\n\tbackground: #b1dda5 !important;\n}\n\n.ui_note.xkit-reply-selected-pn {\n\tbackground: #b1dda5 !important;\n}\n\n.xkit-reply-button-pn {\n\tcolor: #fff !important;\n\tbackground: rgba(151,157,162,.6);\n\tposition: absolute;\n\tright: 17px; top: 17px;\n\tdisplay: none;\n\tfont-weight: bold;\n\tfont-size: 9px !important;\n\tpadding: 0px 2px; border-radius: 2px;\n\ttext-decoration: none;\n\ttext-transform: uppercase !important;\n\ttext-shadow: none !important;\n\tline-height: 12px !important; height: 12px !important;\n\tcursor: pointer;\n}\n\n.xkit-reply-button-pn.xkit-notes-new-style-fix {\n\n\twidth: 23px !important; height: 23px !important;\n\tbackground: no-repeat url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTUyMUE0NDVFN0FFMTFFMkEzRjVGNDc4NTMxMDZBOUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTUyMUE0NDZFN0FFMTFFMkEzRjVGNDc4NTMxMDZBOUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxNTIxQTQ0M0U3QUUxMUUyQTNGNUY0Nzg1MzEwNkE5RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxNTIxQTQ0NEU3QUUxMUUyQTNGNUY0Nzg1MzEwNkE5RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkkyyfgAAAEFSURBVHjaYvz//z8DtQATkeqMgFiRWoZ5AHElEHNQwzAeIE4F4lVALE+pYd+gtC8QbwRiO6yqQBGAB0sCsQsQr/6PCt4AcQa6emwGsAGxLxBvAeJXQPwFiP/8xwR/gXgqEHPiMkwMiysIgR1ArI5umAgQH/xPHpiKbtgqMg0C+UQe2TBnIP6BpOATED8G4kdAfBmIX2Ax5CcQtwMxM3qYTYIqOAfEPUDsDsSKQCwLla9CMwgUMVG4YvMUEM8AYikcSaQRyaBjQGyOTR2MUQbE7HjSWzvUoGXQGMeqjhFaaggA8Qc8OaAEmtHzgPgvLkUsUPoDgey0D4g/4jMIBBipWZ4BBBgAnN9ofjuirQ8AAAAASUVORK5CYII=') rgba(0,0,0,0.77);\n\ttop: 10px !important;\n\tbackground-position: 50% 50%;\n\tborder: 1px solid rgba(0,0,0,0.33);\n\tpadding: 0px !important;\n\tright: 42px !important;\n\tline-height: 300px !important;\n\toverflow: hidden;\n\tcursor: pointer;\n\n}\n\n.xkit-reply-button-pn.xkit-notes-new-style-fix-pn {\n\n\twidth: 25px !important; height: 25px !important;\n\tbackground: no-repeat url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAJCAYAAAAGuM1UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODBEMzQzNENFN0UxMTFFMkEzRjVGNDc4NTMxMDZBOUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODBEMzQzNERFN0UxMTFFMkEzRjVGNDc4NTMxMDZBOUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Njc4QjY4REU3RDUxMUUyQTNGNUY0Nzg1MzEwNkE5RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5Njc4QjY4RUU3RDUxMUUyQTNGNUY0Nzg1MzEwNkE5RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtgF+G8AAACUSURBVHjaYvj//z8DNlxRUXEeiOXRxZkYcAMDIL5QWVnpjyzICNKFDIAK7KGKJyAJT2hvby9E0QBUWA+kCoBYAIeNF4A4gAWqeD6QSmDAD0C2HmD++fOnPZr1DHhsiGCCOgMEHkA1OkAxMlgAEgP64yLISQFA3ADkNKJ5HkR9ABkIlFsIE2fBphjJCQkgU5EFAQIMANoATulF5d0+AAAAAElFTkSuQmCC') #f0f0f0;\n\ttop: 50% !important; margin-top: -12px !important;\n\tbackground-position: 50% 50%;\n\tborder: 1px solid #d9d9d9;\n\tpadding: 0px !important;\n\tright: 42px !important;\n\tline-height: 300px !important;\n\toverflow: hidden;\n\tcursor: pointer;\n\n}\n\n.xkit-reply-button-pn.xkit-notes-new-style-fix-pn.xkit-reply-button-flush-to-right {\n\n\tright: 10px !important;\n\n}\n\n.xkit-reply-button {\n\n\tposition: absolute;\n\tright: 35px; top: 7px;\n\tbackground: rgba(255,255,255,.38) !important;\n\tdisplay: none;\n\tcolor: #3d546b !important;\n\tfont-weight: bold;\n\tfont-size: 9px !important;\n\tpadding: 0px 2px; border-radius: 2px;\n\ttext-decoration: none;\n\ttext-transform: uppercase !important;\n\tline-height: 12px !important; height: 12px !important;\n\n\n}\n\n.xkit-reply-button-pn:hover {\n\tbackground-color: #979da2 !important;\n}\n\n.xkit-reply-button:hover {\n\tbackground-color: rgba(255,255,255,.75) !important;\n}\n\n.xkit-reply-button-pn.xkit-notes-new-style-fix-pn:hover {\n\tborder-color: #c9c9c9;\n\tbackground-color: #f0f0f0 !important;\n}\n","title":"One-Click Reply","description":"Lets you reply to notifications","developer":"new-xkit","version":"2.0.6","frame":"false","beta":"false","details":"To use this extension, hover over a notification and click on the Reply button. If Multi-Reply is on, hold down the ALT key while clicking on the Reply button to select/deselect posts and reply to all of them at once.","file":"found","server":"up","errors":false,"slow":"false"}
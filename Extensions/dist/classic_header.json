{"id":"classic_header","script":"//* TITLE Header Options **//\n//* VERSION 2.4.0 **//\n//* DESCRIPTION Customize the header. **//\n//* DEVELOPER new-xkit **//\n//* DETAILS This extension adds your blogs on the top of the page, so you can easily switch between blogs. The blog limit on the header is five, but you can limit this to three blogs and turn off the blog title bubble from the settings. **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.classic_header = new Object({\n\n\trunning: false,\n\tslow: true,\n\n\tpreferences: {\n\t\t\"sep0\": {\n\t\t\ttext: \"Header Appearance\",\n\t\t\ttype: \"separator\",\n\t\t},\n\t\t\"fixed_width\": {\n\t\t\ttext: \"Reduce the max width of the header to match the dashboard\",\n\t\t\tdefault: false,\n\t\t\tvalue: false,\n\t\t\tdesktop_only: true\n\t\t},\n\t\t\"fixed_position\": {\n\t\t\ttext: \"Fixed position header (un-stickify)\",\n\t\t\tdefault: false,\n\t\t\tvalue: false,\n\t\t\tdesktop_only: true\n\t\t},\n\t\t\"fix_color\": {\n\t\t\ttext: \"Make the tab notification bubbles red again\",\n\t\t\tdefault: false,\n\t\t\tvalue: false,\n\t\t\tdesktop_only: true\n\t\t},\n\t\t\"mobile_sticky\": {\n\t\t\ttext: \"Scrolling header (like desktop)\",\n\t\t\tdefault: false,\n\t\t\tvalue: false,\n\t\t\tmobile_only: true\n\t\t},\n\t\t\"mobile_logout\": {\n\t\t\ttext: \"Add logout button to menu\",\n\t\t\tdefault: false,\n\t\t\tvalue: false,\n\t\t\tmobile_only: true\n\t\t},\n\t\t\"sep1\": {\n\t\t\ttext: \"Blogs on the header\",\n\t\t\ttype: \"separator\",\n\t\t\tdesktop_only: true\n\t\t},\n\t\t\"show_avatars\": {\n\t\t\ttext: \"Show my blogs on the header\",\n\t\t\tdefault: true,\n\t\t\tvalue: true,\n\t\t\tdesktop_only: true\n\t\t},\n\t\tappearance: {\n\t\t\ttext: \"Avatar Appearance\",\n\t\t\tdefault: \"circle\",\n\t\t\tvalue: \"circle\",\n\t\t\ttype: \"combo\",\n\t\t\tvalues: [\n\t\t\t\t\"Circle (default)\", \"circle\",\n\t\t\t\t\"Rounded Box\", \"box\"\n\t\t\t],\n\t\t\tdesktop_only: true\n\t\t},\n\t\tmaximum: {\n\t\t\ttext: \"Maximum blogs to show\",\n\t\t\tdefault: \"b3\",\n\t\t\tvalue: \"b3\",\n\t\t\ttype: \"combo\",\n\t\t\tvalues: [\n\t\t\t\t\"1 Blog\", \"b1\",\n\t\t\t\t\"2 Blogs\", \"b2\",\n\t\t\t\t\"3 Blogs\", \"b3\",\n\t\t\t\t\"4 Blogs\", \"b4\",\n\t\t\t\t\"5 Blogs\", \"b5\"\n\t\t\t],\n\t\t\tdesktop_only: true\n\t\t},\n\t\t\"show_bubble\": {\n\t\t\ttext: \"Show blog title bubble on hover\",\n\t\t\tdefault: true,\n\t\t\tvalue: true,\n\t\t\tdesktop_only: true\n\t\t}\n\t},\n\n\trun: function() {\n\n\t\tXKit.tools.init_css(\"classic_header\");\n\t\t$(\"#xoldeheader\").remove();\n\n\t\tif (XKit.extensions.classic_header.preferences.show_avatars.value) {\n\t\t\tXKit.extensions.classic_header.show_blogs();\n\t\t}\n\t\tif (XKit.extensions.classic_header.preferences.fixed_width.value === true) {\n\t\t\tXKit.tools.add_css(\" @media screen and (min-width: 900px){.l-header {max-width: 900px!important;}}\", \"classic_header_fixed_width\");\n\t\t}\n\n\t\tif (XKit.extensions.classic_header.preferences.fixed_position.value) {\n\t\t\tXKit.tools.add_css(\" .l-header-container { position: absolute !important; }\", \"classic_header_fixed_position\");\n\t\t}\n\n\t\tif (XKit.extensions.classic_header.preferences.fix_color.value) {\n\t\t\tXKit.tools.add_css(\" .tab_notice_value { color: #ffffff !important; } .selected .tab_notice, .tab_notice { background: #bc3333 !important; } .tab_bar .tab.selected .tab_anchor, .tab_bar .tab.active .tab_anchor {opacity: 0.5;}\", \"classic_header_fixed_color\");\n\t\t}\n\n\t\tif (XKit.extensions.classic_header.preferences.mobile_sticky.value) {\n\t\t\t// The nav menu is written terribly. Thanks @staff.\n\t\t\tXKit.tools.add_css(\" #container { position: absolute; top:44px; } .mobile-nav { position: fixed; top: 0; z-index: 99; left: 0; width: calc(100% + 1px); } .nav-menu .drawer, .nav-menu.active .sneeze-guard { height: calc(100vh - 44px); top:44px; }\",\"classic_header_mobile_sticky\");\n\t\t\t$('#footer').insertAfter($('#load_more_posts'));\n\t\t}\n\n\t\tif (XKit.extensions.classic_header.preferences.mobile_logout.value) {\n\t\t\tm_html = '<a class=\\\"nav-item with-icon\\\" href=\\\"/logout\\\"><span class=\\\"nav-text nav-item-goodbye\\\">Log Out</span></a>';\n\t\t\t$('.nav-site-sections').append(m_html);\n\t\t}\n\n\t},\n\n\tshow_blogs: function() {\n\n\t\tif (document.location.href.indexOf(\"/following\") !== -1) {\n\t\t\treturn;\n\t\t}\n\t\tvar m_html = \"\";\n\t\tvar m_counter = 0;\n\t\tvar max_count = 6;\n\n\t\tif (XKit.extensions.classic_header.preferences.maximum.value !== \"\") {\n\t\t\tmax_count = parseInt(XKit.extensions.classic_header.preferences.maximum.value.substring(1)) + 1;\n\t\t}\n\n\t\tif (XKit.extensions.classic_header.preferences.appearance.value === \"box\") {\n\t\t\tXKit.tools.add_css(\".xoldeheader-item { border-radius: 7px !important; }\", \"classic_header_box\");\n\t\t}\n\n\t\ttry {\n\t\tvar tab_blogs = $(\".tab_blog\");\n\t\tif (tab_blogs.length > 0) {\n\t\t\ttab_blogs.each(function(index) {\n\t\t\t\tvar tab_blog = $(this);\n\t\t\t\tif (tab_blog.hasClass('tab_dashboard')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tm_counter ++;\n\n\t\t\t\tif (m_counter >= max_count) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar raw_id = tab_blog.attr('id');\n\t\t\t\t// Id has the form tab_blog_{blog-name}\n\t\t\t\tvar blog_id = raw_id.substring('tab_blog_'.length, raw_id.length);\n\t\t\t\tvar blog_icon = tab_blog.find('.blog_icon').css('background-image');\n\t\t\t\tif (!blog_icon || blog_icon === \"none\") {\n\t\t\t\t\tblog_icon = \"no-repeat url(\\\"http://assets.tumblr.com/images/lock_avatar.png\\\") 50% / 8px\";\n\t\t\t\t}\n\n\t\t\t\tvar blog_name = tab_blog.find('.blog_name').text();\n\t\t\t\tvar is_private = tab_blog.find('.blog_icon').hasClass('private');\n\n\t\t\t\tif (is_private) {\n\t\t\t\t\tblog_name += ' [private]';\n\t\t\t\t}\n\n\t\t\t\tm_html = m_html + '<div class=\"xoldeheader-item-container\">' +\n\t\t\t\t\t\t'<a href=\"http://www.tumblr.com/blog/' + blog_id + '/\" class=\"xoldeheader-item\"' +\n\t\t\t\t\t\t' id=\"xoldeheader-item-' + blog_id + '\"' +\n\t\t\t\t\t\t' style=\\'background: ' + blog_icon + '\\' title=\"' + blog_name + '\">&nbsp;</a>' +\n\t\t\t\t\t\t' <div class=\"selection_nipple\"></div></div>';\n\t\t\t});\n\t\t\tXKit.storage.set(\"classic_header\",\"header_html\",m_html);\n\t\t} else {\n\t\t\tif (XKit.storage.get(\"classic_header\", \"header_html\",\"\") === \"\") {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tm_html = XKit.storage.get(\"classic_header\", \"header_html\",\"\");\n\t\t\t}\n\t\t}\n\n\t\t$(\"#user_tools\").prepend('<div id=\"xoldeheader\">' + m_html + '</div>');\n\n\t\tif (XKit.extensions.classic_header.preferences.show_bubble.value === true) {\n\t\t\t$(\".xoldeheader-item\").tipTip({maxWidth: \"auto\", delay: 10, edgeOffset: 5 });\n\t\t}\n\n\t\tif (document.location.href.indexOf('/blog/') !== -1) {\n\n\t\t\tvar user_url = document.location.href.substring(document.location.href.indexOf('/blog/') + 6);\n\t\t\tuser_url = user_url.replace(\"#\",\"\");\n\t\t\tif (user_url.indexOf(\"/\") !== -1) {\n\t\t\t\tuser_url = user_url.substring(0,user_url.indexOf(\"/\"));\n\t\t\t}\n\n\t\t\t$(\"#xoldeheader-item-\" + user_url).addClass(\"selected\");\n\t\t\t$(\"#xoldeheader-item-\" + user_url).parent().addClass(\"selected\");\n\t\t\t$(\"#home_button\").removeClass(\"selected\");\n\n\t\t}\n\n\t\t} catch(e) {\n\t\t\tXKit.console.add(e.message);\n\t\t}\n\n\t},\n\n\tdestroy: function() {\n\t\tXKit.tools.remove_css(\"classic_header\");\n\t\tXKit.tools.remove_css(\"classic_header_fixed_color\");\n\t\tXKit.tools.remove_css(\"classic_header_fixed_position\");\n\t\tXKit.tools.remove_css(\"classic_header_fixed_width\");\n\t\tXKit.tools.remove_css(\"classic_header_mobile_sticky\");\n\t\t$(\".nav-item-goodbye\").remove();\n\t\t$(\"#xoldeheader\").remove();\n\t\tXKit.tools.remove_css(\"classic_header_box\");\n\t}\n\n});\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzdGMTE3NDA3MjA2ODExODA4MzkyMjM2MzU5MTQ4NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozQTk2NTdGQjM4Q0ExMUUzQTFDQUFDOThEMTlDRUY3OSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozQTk2NTdGQTM4Q0ExMUUzQTFDQUFDOThEMTlDRUY3OSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZCN0YxMTc0MDcyMDY4MTE4MDgzOTIyMzYzNTkxNDg0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY3N0YxMTc0MDcyMDY4MTE4MDgzOTIyMzYzNTkxNDg0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+b8ll0gAAAUdJREFUeNpilFjzmYGWgIWR8R+tLWCgrQUMDDT2AQOtfcDM/JfWcfCfthYwMTHS2AdMNI5kZiYGWgcRwgdGgmy+4hx2IuxA9qE3Pze//HHu/S9KpICAUWPPC7i6SlVeHV4WuNyVz3/ab38GqiZPCsJlAvoAgoCuQFYHBEAuUJBsKRhi/g9BdiKsmCEIFCRbCoJYWBgJpjOKpIBB9B+Cjr3/iakOKEi2FBQxM/+HoJ3vvl37+htZHZALFCRbCopk0/KBpQUQvfr1+8GP37//MwiwMn35+2/3229LX3y69OU72VJQZH3qIa1LU/TCrlxeRJKdpeDWCypZgFqaBonyeQlzAxldKuKVd6lgB6PrxfsQ1i49BSqGjNulB3Af0KTCgRsLjANolvC5do+aFsCMBebk/0O8Phj6FrAy0ToOhnwks9C4XQQQYAAYdO2DMbaKiwAAAABJRU5ErkJggg==","css":"#xoldeheader { display: inline-block; }\n\n.xoldeheader-item-container {\n\tposition: relative; top: 5px;\n\tdisplay: inline-block; min-height: 50px; margin-right: 9px; margin-left: 9px;\n}\n\n.xoldeheader-item-container.selected .selection_nipple {\n\tdisplay: block; bottom: 0;\n}\n\n.xoldeheader-item {\n\tdisplay: inline-block; width: 26px; height: 26px; margin-top: 0px; margin-left: 0px;\n\tmargin-right: 0px; text-decoration: none; background-size: 26px 26px !important; border-radius: 40px;\n\topacity: 0.45;\n}\n\n.xoldeheader-item:hover {\n\topacity: 0.75;\n}\n\n.xoldeheader-item.selected {\n\topacity: 1 !important; box-shadow: 0px 1px 3px rgba(0,0,0,0.42); margin-bottom: 6px;\n}\n","title":"Header Options","description":"Customize the header.","developer":"new-xkit","version":"2.4.0","details":"This extension adds your blogs on the top of the page, so you can easily switch between blogs. The blog limit on the header is five, but you can limit this to three blogs and turn off the blog title bubble from the settings.","frame":"false","beta":"false","slow":"false"}
{"id":"find_inactives","script":"//* TITLE Find Inactives **//\n//* VERSION 0.2.0 **//\n//* DESCRIPTION Find the inactive blogs you follow **//\n//* DEVELOPER STUDIOXENIX **//\n//* DETAILS This extension lets you find the blog that haven't been updated for over 30 days. Just go to list of blogs you follow, then click on &quot;Find Inactive Blogs&quot; button below your Crushes to get started. **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.find_inactives = new Object({\n\n\trunning: false,\n\tapiKey: \"fuiKNFp9vQFvjLNvx4sUwti4Yb5yGutBN4Xh10LXZhhRKjWlV4\",\n\n\ttimeout_time: 300,\n\n\tpreferences: {\n\t\ttime: {\n\t\t\ttext: \"Time to mark a blog as inactive\",\n\t\t\tdefault: \"30\",\n\t\t\tvalue: \"30\",\n\t\t\ttype: \"combo\",\n\t\t\tvalues: [\n\t\t\t\t\"2 weeks\", \"15\",\n\t\t\t\t\"A month\", \"30\",\n\t\t\t\t\"Two months\", \"60\",\n\t\t\t\t\"4 months\", \"120\",\n\t\t\t\t\"A year\", \"365\",\n\t\t\t],\n\t\t}\n\t},\n\n\trun: function() {\n\t\tthis.running = true;\n\n\t\tif (document.location.href.indexOf(\"www.tumblr.com/following\") === -1) { return; }\n\n\t\tXKit.tools.init_css(\"find_inactives\");\n\n\t\t$(\".grey_note\").before('<div class=\"xkit-button xkit-wide-button\" id=\"xkit-find-inactives-button\" style=\"display: block; font-size: 12px; font-weight: bold; text-align: center; margin-bottom: 10px; margin-top: 15px;\">Find Inactive Blogs</div>');\n\n\t\t$(\"#xkit-find-inactives-button\").click(function() {\n\n\t\t\tXKit.extensions.find_inactives.start();\n\n\t\t});\n\n\t},\n\n\tpeople_list: [],\n\tretired_people_list: [],\n\tpage: 0,\n\tpeople_count: 0,\n\tpeople_index: 0,\n\n\tstart: function() {\n\n\t\tXKit.extensions.find_inactives.retired_people_list = [];\n\t\tXKit.extensions.find_inactives.people_list = [];\n\t\tXKit.extensions.find_inactives.page = 0;\n\t\tXKit.extensions.find_inactives.people_index = -1;\n\n\t\tXKit.window.show(\"Please wait..\",\"I'm trying to find the inactive blogs, this might take a while.\" + XKit.progress.add(\"find-inactives\") + \"<div id=\\\"xkit-find-inactives-status\\\">Initializing...</div>\",\"info\");\n\n\t\tXKit.extensions.find_inactives.get_count();\n\n\t},\n\n\tget_count: function() {\n\t\tvar done = false;\n\t\t$(\"#tabs\").children().each(function() {\n\t\t\tif (done) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar tab = $(this);\n\t\t\tif (tab.attr('href') !== '/following') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdone = true;\n\n\t\t\t// Extract the first number found\n\t\t\tXKit.extensions.find_inactives.people_count = parseInt(tab.text().match(/\\d+/));\n\t\t\tXKit.extensions.find_inactives.next_page();\n\t\t});\n\t},\n\n\tshow_error: function(message) {\n\n\t\tXKit.window.close();\n\t\tXKit.window.show(\"Find Inactives encountered an error\", message, \"error\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message\\\">OK</div>\");\n\n\t},\n\n\tlist_people: function() {\n\n\t\tif (XKit.extensions.find_inactives.retired_people_list.length === 0) {\n\n\t\t\tXKit.window.show(\"All up to date!\", \"I couldn't find anyone who has been gone for more than \" + XKit.extensions.find_inactives.preferences.time.value + \" days.\", \"info\",\"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message\\\">Whee!</div>\");\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar m_html = '<div class=\"nano\" id=\"find-inactives-window-outer\"><div class=\"content\" id=\"find-inactives-window\">';\n\n\t\tfor (var i=0;i<XKit.extensions.find_inactives.retired_people_list.length;i++) {\n\n\t\t\tm_html = m_html + \"<div data-url=\\\"http://\" + XKit.extensions.find_inactives.retired_people_list[i].username + \".tumblr.com/\\\" class=\\\"find-inactives-blog\\\">\" +\n\t\t\t\t\t\t\t\"<div class=\\\"name\\\">\" + XKit.extensions.find_inactives.retired_people_list[i].username + \"</div>\" +\n\t\t\t\t\t\t\t\"<div class=\\\"days\\\">Inactive for \" + XKit.extensions.find_inactives.retired_people_list[i].days + \" days</div>\" +\n\t\t\t\t\t\t\t\"<img src=\\\"http://api.tumblr.com/v2/blog/\" + XKit.extensions.find_inactives.retired_people_list[i].username + \".tumblr.com/avatar/512\\\" class=\\\"avatar\\\">\" +\n\t\t\t\t\t\t\"</div>\";\n\n\t\t}\n\n\t\tm_html = m_html + \"</div></div>\";\n\n\t\t$(\"body\").css(\"overflow\",\"hidden\");\n\n\t\tXKit.window.show(\"Found \" + XKit.extensions.find_inactives.retired_people_list.length + \" inactive blog(s)\", m_html, \"info\",\"<div class=\\\"xkit-button default\\\" id=\\\"xkit-close-message-find-inactives\\\">OK</div>\");\n\n\t\t$(\"#find-inactives-window-outer\").nanoScroller();\n\n\t\t$(\"#xkit-close-message-find-inactives\").click(function() {\n\n\t\t\t$(\"body\").css(\"overflow\",\"auto\");\n\t\t\tXKit.window.close();\n\n\t\t});\n\n\n\t\tif ($(\".find-inactives-blog\").length > 4) {\n\n\t\t\t$(\".find-inactives-blog:last-child\").css(\"border-bottom\", \"0\");\n\n\t\t}\n\n\t\t$(\".find-inactives-blog\").click(function() {\n\n\t\t\twindow.open($(this).attr('data-url'));\n\n\t\t});\n\n\t},\n\n\tnext_person: function() {\n\n\t\tXKit.extensions.find_inactives.people_index++;\n\n\t\tif (XKit.extensions.find_inactives.people_index >= XKit.extensions.find_inactives.people_list.length) {\n\n\t\t\tXKit.extensions.find_inactives.list_people();\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar api_url = \"https://api.tumblr.com/v2/blog/\" + XKit.extensions.find_inactives.people_list[XKit.extensions.find_inactives.people_index] + \".tumblr.com/info\" + \"?api_key=\" + XKit.extensions.find_inactives.apiKey;\n\n\t\tGM_xmlhttpRequest({\n\t\t\t\tmethod: \"GET\",\n\t\t\t\turl: api_url,\n\t\t\t\tjson: true,\n\t\t\tonerror: function(response) {\n\t\t\t\t// Probably a bug in the list.\n\t\t\t\tsetTimeout(function() { XKit.extensions.find_inactives.next_person(); }, 800);\n\t\t\t\tconsole.log(\"Error -> Can't get API read for person \" + XKit.extensions.find_inactives.people_list[XKit.extensions.find_inactives.people_index]);\n\t\t\t\treturn;\n\t\t\t},\n\t\t\tonload: function(response) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tvar total = XKit.extensions.find_inactives.people_count;\n\t\t\t\t\tvar perc = (XKit.extensions.find_inactives.people_index) * 100 / total;\n\n\t\t\t\t\tXKit.progress.value(\"find-inactives\", perc);\n\n\t\t\t\t\tvar data = JSON.parse(response.responseText).response;\n\t\t\t\t\tvar post_date = new Date(data.blog.updated * 1000);\n\n\t\t\t\t\tvar days = Math.round(Math.abs((post_date.getTime() - new Date().getTime())/(24*60*60*1000)));\n\n\t\t\t\t\tconsole.log(\"days for user \" + XKit.extensions.find_inactives.people_list[XKit.extensions.find_inactives.people_index] + \" -> \" + days);\n\n\t\t\t\t\tif (days >= parseInt(XKit.extensions.find_inactives.preferences.time.value)) {\n\n\t\t\t\t\t\tvar m_user = {};\n\t\t\t\t\t\tm_user.username = XKit.extensions.find_inactives.people_list[XKit.extensions.find_inactives.people_index];\n\t\t\t\t\t\tm_user.days = days;\n\n\t\t\t\t\t\tXKit.extensions.find_inactives.retired_people_list.push(m_user);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tsetTimeout(function() { XKit.extensions.find_inactives.next_person(); }, XKit.extensions.find_inactives.timeout_time);\n\n\t\t\t\t} catch(e) {\n\t\t\t\t\t// Probably a bug in the list or an empty blog.\n\t\t\t\t\tconsole.log(\"Error on person \" + XKit.extensions.find_inactives.people_list[XKit.extensions.find_inactives.people_index] + \" -> \" + e.message);\n\t\t\t\t\tsetTimeout(function() { XKit.extensions.find_inactives.next_person(); }, 800);\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t},\n\n\tnext_page: function() {\n\n\t\tGM_xmlhttpRequest({\n\t\t\tmethod: \"GET\",\n\t\t\turl: \"http://www.tumblr.com/following/\" + (XKit.extensions.find_inactives.page * 25),\n\t\t\tjson: false,\n\t\t\tonerror: function(response) {\n\t\t\t\tXKit.extensions.find_inactives.show_error(\"<b>Unable to get the blog information.</b><br/>Please try again later.<br/><br/>Error Code: FIA-330\");\n\t\t\t\treturn;\n\t\t\t},\n\t\t\tonload: function(response) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tvar total = XKit.extensions.find_inactives.people_count;\n\t\t\t\t\tvar perc = (XKit.extensions.find_inactives.page * 25) * 100 / total;\n\n\t\t\t\t\tXKit.progress.value(\"find-inactives\", perc);\n\n\t\t\t\t\t$(\".follower\", response.responseText).each(function() {\n\n\t\t\t\t\t\tvar username = $(this).find(\".name\").find(\"a\").html();\n\n\t\t\t\t\t\tif (XKit.extensions.find_inactives.people_list.indexOf(username) === -1) {\n\t\t\t\t\t\t\tXKit.extensions.find_inactives.people_list.push(username);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t\tif ($(\".next\", response.responseText).length > 0) {\n\n\t\t\t\t\t\tXKit.extensions.find_inactives.page++;\n\t\t\t\t\t\tsetTimeout(function() { XKit.extensions.find_inactives.next_page(); }, XKit.extensions.find_inactives.timeout_time);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t$(\"#xkit-find-inactives-status\").html(\"Fetching information about the people I've just learned about...\");\n\t\t\t\t\t\tsetTimeout(function() { XKit.extensions.find_inactives.next_person(); }, 500);\n\n\t\t\t\t\t}\n\n\t\t\t\t} catch(e) {\n\t\t\t\t\tXKit.extensions.find_inactives.show_error(\"<b>Unable to get the blog information.</b><br/>Please try again later.<br/><br/>Error Code: FIA-230<br/>\" + e.message);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t},\n\n\tdestroy: function() {\n\t\tthis.running = false;\n\t\t$(\"#xkit-find-inactives-button\").remove();\n\t}\n\n});\n","icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzdGMTE3NDA3MjA2ODExODA4MzkyMjM2MzU5MTQ4NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3MzI5Rjk5RDVENDQxMUUzOTc0NUVFMzYyMTQ1MzcwNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MzI5Rjk5QzVENDQxMUUzOTc0NUVFMzYyMTQ1MzcwNSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAxODAxMTc0MDcyMDY4MTFBRTczREVDNEM5OEM0RTE5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY3N0YxMTc0MDcyMDY4MTE4MDgzOTIyMzYzNTkxNDg0Ii8+IDwvcmRmOkRlc2NyaXB0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","css":"#find-inactives-window-outer {\n\theight: 230px;\n\tborder: 1px solid rgb(190,190,190);\n}\n\n.find-inactives-blog:hover {\n\tbackground: rgb(245,245,245);\n}\n.find-inactives-blog {\n\tborder-bottom: 1px solid rgb(190,190,190);\n\theight: 50px;\n\toverflow: hidden;\n\tposition: relative;\n\tpadding-left: 60px;\n\tfont-size: 13px;\n\tline-height: 16px;\n\tcursor: pointer;\n}\n\n.find-inactives-blog .name {\n\tposition: absolute;\n\ttop: 8px;\n\tleft: 55px;\n\tfont-weight: bold;\n}\n\n.find-inactives-blog .days {\n\tposition: absolute;\n\ttop: 24px;\n\tleft: 55px;\n\tfont-weight: normal;\n\tcolor: rgb(120,120,120);\n}\n\n.find-inactives-blog .avatar {\n\twidth: 32px;\n\theight: 32px;\n\tposition: absolute;\n\ttop: 8px;\n\tleft: 10px;\n\tborder-radius: 4px;\n}","title":"Find Inactives","description":"Find the inactive blogs you follow","developer":"STUDIOXENIX","version":"0.2.0","frame":"false","beta":"false","details":"This extension lets you find the blog that haven't been updated for over 30 days. Just go to list of blogs you follow, then click on &quot;Find Inactive Blogs&quot; button below your Crushes to get started.","file":"found","server":"up","errors":false,"slow":"false"}